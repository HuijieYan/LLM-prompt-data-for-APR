# stacktrace

```json
[
    [
        "stderr = 'fatal: The current branch master has no upstream branch.\\nTo push the current branch and set the remote as upstream, use\\n\\n    git push --set-upstream origin master\\n\\n'\n\n    def test_get_new_command(stderr):\n        assert get_new_command(Command('git push', stderr=stderr))\\\n            == \"git push --set-upstream origin master\"\n>       assert get_new_command(Command('git push -u', stderr=stderr))\\\n            == \"git push --set-upstream origin master\"\n\ntests/rules/test_git_push.py:26: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n<decorator-gen-7>:2: in get_new_command\n    ???\nthefuck/specific/git.py:32: in git_support\n    return fn(command)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\ncommand = Command(script=git push -u, stdout=, stderr=fatal: The current branch master has no upstream branch.\nTo push the current branch and set the remote as upstream, use\n\n    git push --set-upstream origin master\n\n)\n\n    @git_support\n    def get_new_command(command):\n        # If --set-upstream or -u are passed, remove it and its argument. This is\n        # because the remaining arguments are concatenated onto the command suggested\n        # by git, which includes --set-upstream and its argument\n        upstream_option_index = -1\n        try:\n            upstream_option_index = command.script_parts.index('--set-upstream')\n        except ValueError:\n            pass\n        try:\n            upstream_option_index = command.script_parts.index('-u')\n        except ValueError:\n            pass\n        if upstream_option_index is not -1:\n            command.script_parts.pop(upstream_option_index)\n>           command.script_parts.pop(upstream_option_index)",
        "\nthefuck/rules/git_push.py:27: IndexError"
    ]
]
```
