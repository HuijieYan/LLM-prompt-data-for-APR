# Error stack trace

```json
[
    [
        "self = <pandas.tests.arithmetic.test_timedelta64.TestTimedeltaArraylikeAddSubOps object at 0x116885f10>\nts = numpy.datetime64('2012-01-01T00:00:00.000000000')\nbox_with_array = <class 'pandas.core.indexes.base.Index'>\n\n    @pytest.mark.parametrize(\n        \"ts\",\n        [\n            Timestamp(\"2012-01-01\"),\n            Timestamp(\"2012-01-01\").to_pydatetime(),\n            Timestamp(\"2012-01-01\").to_datetime64(),\n        ],\n    )\n    def test_td64arr_add_sub_datetimelike_scalar(self, ts, box_with_array):\n        # GH#11925, GH#29558\n        tdi = timedelta_range(\"1 day\", periods=3)\n        expected = pd.date_range(\"2012-01-02\", periods=3)\n    \n        tdarr = tm.box_expected(tdi, box_with_array)\n        expected = tm.box_expected(expected, box_with_array)\n    \n        tm.assert_equal(ts + tdarr, expected)\n        tm.assert_equal(tdarr + ts, expected)\n    \n        expected2 = pd.date_range(\"2011-12-31\", periods=3, freq=\"-1D\")\n        expected2 = tm.box_expected(expected2, box_with_array)\n    \n>       tm.assert_equal(ts - tdarr, expected2)\n\npandas/tests/arithmetic/test_timedelta64.py:921: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \npandas/core/indexes/datetimelike.py:558: in __rsub__\n    result = self._data.__rsub__(maybe_unwrap_index(other))\npandas/core/arrays/datetimelike.py:1310: in __rsub__\n    other = DatetimeArray(other)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <[TypeError(\"object of type 'NoneType' has no len()\") raised in repr()] DatetimeArray object at 0x116885a60>\nvalues = numpy.datetime64('2012-01-01T00:00:00.000000000')\ndtype = dtype('<M8[ns]'), freq = None, copy = False\n\n    def __init__(self, values, dtype=_NS_DTYPE, freq=None, copy=False):\n        if isinstance(values, (ABCSeries, ABCIndexClass)):\n            values = values._values\n    \n        inferred_freq = getattr(values, \"_freq\", None)\n    \n        if isinstance(values, type(self)):\n            # validation\n            dtz = getattr(dtype, \"tz\", None)\n            if dtz and values.tz is None:\n                dtype = DatetimeTZDtype(tz=dtype.tz)\n            elif dtz and values.tz:\n                if not timezones.tz_compare(dtz, values.tz):\n                    msg = (\n                        \"Timezone of the array and 'dtype' do not match. \"\n                        \"'{}' != '{}'\"\n                    )\n                    raise TypeError(msg.format(dtz, values.tz))\n            elif values.tz:\n                dtype = values.dtype\n            # freq = validate_values_freq(values, freq)\n            if freq is None:\n                freq = values.freq\n            values = values._data\n    \n        if not isinstance(values, np.ndarray):\n            msg = (\n                \"Unexpected type '{}'. 'values' must be a DatetimeArray \"\n                \"ndarray, or Series or Index containing one of those.\"\n            )\n>           raise ValueError(msg.format(type(values).__name__))",
        "\npandas/core/arrays/datetimes.py:363: ValueError"
    ],
    [
        "self = <pandas.tests.arithmetic.test_timedelta64.TestTimedeltaArraylikeAddSubOps object at 0x11e994880>\nts = numpy.datetime64('2012-01-01T00:00:00.000000000')\nbox_with_array = <function to_array at 0x1114f0940>\n\n    @pytest.mark.parametrize(\n        \"ts\",\n        [\n            Timestamp(\"2012-01-01\"),\n            Timestamp(\"2012-01-01\").to_pydatetime(),\n            Timestamp(\"2012-01-01\").to_datetime64(),\n        ],\n    )\n    def test_td64arr_add_sub_datetimelike_scalar(self, ts, box_with_array):\n        # GH#11925, GH#29558\n        tdi = timedelta_range(\"1 day\", periods=3)\n        expected = pd.date_range(\"2012-01-02\", periods=3)\n    \n        tdarr = tm.box_expected(tdi, box_with_array)\n        expected = tm.box_expected(expected, box_with_array)\n    \n        tm.assert_equal(ts + tdarr, expected)\n        tm.assert_equal(tdarr + ts, expected)\n    \n        expected2 = pd.date_range(\"2011-12-31\", periods=3, freq=\"-1D\")\n        expected2 = tm.box_expected(expected2, box_with_array)\n    \n>       tm.assert_equal(ts - tdarr, expected2)\n\npandas/tests/arithmetic/test_timedelta64.py:921: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \npandas/core/arrays/datetimelike.py:1310: in __rsub__\n    other = DatetimeArray(other)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <[TypeError(\"object of type 'NoneType' has no len()\") raised in repr()] DatetimeArray object at 0x11e994250>\nvalues = numpy.datetime64('2012-01-01T00:00:00.000000000')\ndtype = dtype('<M8[ns]'), freq = None, copy = False\n\n    def __init__(self, values, dtype=_NS_DTYPE, freq=None, copy=False):\n        if isinstance(values, (ABCSeries, ABCIndexClass)):\n            values = values._values\n    \n        inferred_freq = getattr(values, \"_freq\", None)\n    \n        if isinstance(values, type(self)):\n            # validation\n            dtz = getattr(dtype, \"tz\", None)\n            if dtz and values.tz is None:\n                dtype = DatetimeTZDtype(tz=dtype.tz)\n            elif dtz and values.tz:\n                if not timezones.tz_compare(dtz, values.tz):\n                    msg = (\n                        \"Timezone of the array and 'dtype' do not match. \"\n                        \"'{}' != '{}'\"\n                    )\n                    raise TypeError(msg.format(dtz, values.tz))\n            elif values.tz:\n                dtype = values.dtype\n            # freq = validate_values_freq(values, freq)\n            if freq is None:\n                freq = values.freq\n            values = values._data\n    \n        if not isinstance(values, np.ndarray):\n            msg = (\n                \"Unexpected type '{}'. 'values' must be a DatetimeArray \"\n                \"ndarray, or Series or Index containing one of those.\"\n            )\n>           raise ValueError(msg.format(type(values).__name__))",
        "\npandas/core/arrays/datetimes.py:363: ValueError"
    ]
]
```
