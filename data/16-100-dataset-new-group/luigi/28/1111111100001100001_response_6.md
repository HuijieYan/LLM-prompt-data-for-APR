The bug in the `table_exists` function seems to be related to the way it handles the `partition` parameter. When `partition` is not None, the function calls `run_hive_cmd` with a specific string formatting that includes a call to `self.partition_spec(partition)`. This is where it seems to be causing issues, as the output might not be properly formatted as expected.

Based on the provided cases, it looks like the output of `run_hive_cmd` should be parsed and the presence of the table should be validated. However, the actual implementation seems to be incorrect, resulting in improper parsing and validation.

To fix the bug, the `self.partition_spec` function should be called to properly format the partition specifications and then used in the command sent to `run_hive_cmd`.

Here's a corrected version of the function:

```python
class HiveCommandClient(HiveClient):
    # ... (other class methods)

    def table_exists(self, table, database='default', partition=None):
        if partition is None:
            stdout = run_hive_cmd('use {0}; show tables like "{1}";'.format(database, table))

            return stdout and table in stdout
        else:
            partition_spec_str = self.partition_spec(partition)
            stdout = run_hive_cmd(f"use {database}; show partitions {table} partition ({partition_spec_str})")

            return bool(stdout)
```

In the corrected version, the `self.partition_spec` function is called to format the partition specifications and then inserted into the command sent to `run_hive_cmd`. Additionally, the return value of the function is explicitly cast to a boolean to ensure consistency in the return type.