The bug in the given function is that the `table_exists` function is not properly handling the case when a partition is given. When a partition is provided, the function is not constructing the Hive command correctly to check if the table exists.

To fix this, we need to modify the else clause in the `table_exists` function to properly construct the Hive command for checking the existence of a table with a given partition.

Here is the corrected version of the function:

```python
def table_exists(self, table, database='default', partition=None):
    if partition is None:
        stdout = run_hive_cmd('use {0}; show tables like "{1}";'.format(database, table))
        return stdout and table in stdout
    else:
        partition_spec_str = ','.join(['{0}="{1}"'.format(k,v) for k,v in partition.items()])
        stdout = run_hive_cmd(f'use {database}; show partitions {table} partition ({partition_spec_str})')
        return bool(stdout)
```

This corrected version of the function constructs the Hive command for checking the existence of a table with a given partition by forming a string that represents the partition specifications and then using that string in the Hive command. This should correctly handle the case when a partition is provided.