The bug in the `table_exists` function is caused by incorrect construction of the Hive command string when a partition is provided. It is not properly calling the `self.partition_spec` function to format the partition details into the Hive command.

The bug can be fixed by properly constructing the Hive command string and formatting the partition details. The corrected version of the function is provided below:

```python
def table_exists(self, table, database='default', partition=None):
    if partition is None:
        stdout = run_hive_cmd('use {0}; show tables like "{1}";'.format(database, table))

        return stdout and table in stdout
    else:
        partition_str = ', '.join([f"{k}='{v}'" for k, v in partition.items()])
        stdout = run_hive_cmd(f"use {database}; show partitions {table} partition ({partition_str})")

        return bool(stdout)
```