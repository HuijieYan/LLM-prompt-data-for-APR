## Plan for fixing the bug
1. The function `run_hive_cmd` is called with the command string. We need to ensure that it returns the output as a string.
2. The `stdout` variable should be checked and processed correctly to determine if the table exists in the database.
3. The condition for checking the existence of a table with partitions should be handled properly to return the correct result.

## The corrected version of the function

```python
def table_exists(self, table, database='default', partition=None):
    if partition is None:
        stdout = run_hive_cmd('use {0}; show tables like "{1}";'.format(database, table))
        return stdout and table in stdout
    else:
        partition_str = ','.join(['{0}={1}'.format(k,v) for k,v in partition.items()])
        stdout = run_hive_cmd("""use {0}; show partitions {1} partition ({2})""".format(database, table, partition_str))
        return stdout.strip() != ''
```