The bug in the `table_exists` function arises from the incorrect usage of the `run_hive_cmd` and `self.partition_spec(partition)` functions, as well as the mishandling of the `stdout` variable.

The `run_hive_cmd` function is used to execute hive commands, but the returned output is not being handled properly. It should be checked to see if the command was successful, such as checking if it contains an error message or not.

Additionally, the usage of `self.partition_spec(partition)` is incorrect. The `partition_spec` method takes a `self` parameter, implying that it belongs to a class. However, it is being called outside of the context of any class, leading to potential issues with how the method is functioning.

To fix the bug, we need to properly handle the output of `run_hive_cmd` and fix the usage of `self.partition_spec(partition)`.

Here's the corrected version of the function:

```python
class HiveCommandClient(HiveClient):

    def table_exists(self, table, database='default', partition=None):
        if partition is None:
            stdout = run_hive_cmd('use {0}; show tables like "{1}";'.format(database, table))
            return stdout and table in stdout
        else:
            partition_string = ' and '.join(['{0} = {1}'.format(k, v) for k, v in partition.items()])
            query = """use {0}; show partitions {1} partition ({2})""".format(database, table, partition_string)
            stdout = run_hive_cmd(query)
            return bool(stdout)
```