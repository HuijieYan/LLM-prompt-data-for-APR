The bug in the `table_exists` function is that it does not account for case sensitivity when checking for the existence of a table in Hive. This is causing the failing test cases because the function in its current state does not handle uppercase and lowercase table names correctly.

To fix this bug, we need to modify the `table_exists` function to make it case insensitive when checking for the existence of a table.

Here's the corrected version of the function:

```python
def table_exists(self, table, database='default', partition=None):
    if partition is None:
        stdout = run_hive_cmd('use {0}; show tables;'.format(database))
        return any(t.lower() == table.lower() for t in stdout.split())
    else:
        stdout = run_hive_cmd('use {0}; show partitions {1}'.format(database, table))
        return stdout.lower() != 'table not found'
```

With this correction, the function now performs a case-insensitive comparison when checking for the existence of a table. This change addresses the issue raised in GitHub and ensures that the function will work correctly for both uppercase and lowercase table names.