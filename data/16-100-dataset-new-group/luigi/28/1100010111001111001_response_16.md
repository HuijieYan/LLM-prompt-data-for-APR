Given the failing tests and the runtime input/output values, it looks like the bug is caused by the function not correctly handling the output from the `run_hive_cmd` function. The function is checking for the presence of the table name in the output, but it's not accounting for any extra characters or newlines in the output.

To fix this bug, we need to modify the function to properly parse the output from `run_hive_cmd` and compare it with the table name.

Here's the corrected version of the function:

```python
def table_exists(self, table, database='default', partition=None):
    if partition is None:
        stdout = run_hive_cmd('use {0}; show tables like "{1}";'.format(database, table))
        return table in stdout.split()
    else:
        stdout = run_hive_cmd("""use %s; show partitions %s partition
                            (%s)""" % (database, table, self.partition_spec(partition)))
        return bool(stdout)  # check if stdout is not empty

```

In this corrected version, we use the `split` method to split the stdout by whitespace, and then check if the table name is in the resulting list. In the case where partition is not None, we simply return `bool(stdout)` to check if the stdout is not empty.