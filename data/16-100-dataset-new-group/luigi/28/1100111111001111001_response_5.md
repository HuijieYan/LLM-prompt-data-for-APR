The bug in the function `table_exists` lies in the condition checking for the existence of the table. When the `partition` parameter is not None, the function calls `run_hive_cmd` with a command to show partitions, and then returns `True` regardless of the output of the command. This is incorrect and leads to incorrect results.

To fix the bug, we need to modify the function to properly check the output of the `run_hive_cmd` for the existence of the table.

Here's the corrected version of the function:

```python
class HiveCommandClient(HiveClient):
    def table_exists(self, table, database='default', partition=None):
        if partition is None:
            stdout = run_hive_cmd('use {0}; show tables like "{1}";'.format(database, table))

            return bool(stdout)
        else:
            stdout = run_hive_cmd("""use %s; show partitions %s partition
                                (%s)""" % (database, table, self.partition_spec(partition)))

            return bool(stdout)
```

With this corrected version, the function now properly checks the output of the `run_hive_cmd` and returns `True` if the table exists, and `False` otherwise. This should fix the failing test cases.