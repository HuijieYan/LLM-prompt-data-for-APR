### Description:
The buggy function `table_exists` is currently not handling case insensitivity properly. This is causing the test cases to fail when checking for the presence of a table in Hive. The expected behavior is for the function to handle case insensitivity when comparing the table name with the output from Hive.

### Bug in the Function:
The bug in the function is that it directly compares the table name with the output from Hive without considering case insensitivity. This causes the assertion error in the test cases because the function does not match the table names correctly, especially when they have different cases.

### Bug Fix Strategy:
To fix the bug, we need to modify the function to handle case-insensitive comparisons between the table name and the output from Hive. This can be achieved by converting both the table name and the output from Hive to lower case before comparison.

### Corrected Code:
```python
def table_exists(self, table, database='default', partition=None):
    if partition is None:
        stdout = run_hive_cmd('use {0}; show tables like "{1}";'.format(database, table))
        return stdout and table.lower() in stdout.lower()
    else:
        stdout = run_hive_cmd("""use %s; show partitions %s partition
                        (%s)""" % (database, table, self.partition_spec(partition)))
        if stdout:
            return True
        else:
            return False
```
In the corrected code, both the `table` and `stdout` are converted to lowercase using the `lower()` method before comparison. This change makes the comparison case insensitive, resolving the issue and passing the failing test cases.