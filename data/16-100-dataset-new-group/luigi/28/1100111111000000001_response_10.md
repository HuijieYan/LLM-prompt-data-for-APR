The bug in the `table_exists` function is that it always returns `False` when partition is `None`. This is not the expected behavior according to the failing test provided. 

The function should return `True` if the table does exist and `False` if the table does not exist. The bug causes this not to happen for the case where the table exists but no partition is provided.

To fix the bug, we need to modify the if condition to check if the `run_hive_cmd` output contains the table name for the case when `partition` is `None`.

Here's the corrected version of the `table_exists` function:

```python
def table_exists(self, table, database='default', partition=None):
    if partition is None:
        stdout = run_hive_cmd('use {0}; show tables like "{1}";'.format(database, table))

        return stdout and table in stdout
    else:
        stdout = run_hive_cmd("""use %s; show partitions %s partition
                            (%s)""" % (database, table, self.partition_spec(partition)))

        return bool(stdout)  # simplified the if-else block
```

In the corrected version, there's no need to explicitly check for `True` or `False` because `stdout` can be directly returned as a boolean.