To fix the bug, we need to update the table_exists function to properly handle the case when the table exists in the database. We should also ensure that the function behaves correctly when checking for the existence of a table with case-insensitive table names.

Here's the corrected version of the table_exists function:

```python
def table_exists(self, table, database='default', partition=None):
    if partition is None:
        stdout = run_hive_cmd('use {0}; show tables like "{1}";'.format(database, table))
        return table in stdout.split('\n')  # Check if the table name is in the list of tables

    else:
        stdout = run_hive_cmd("""use %s; show partitions %s partition
                            (%s)""" % (database, table, self.partition_spec(partition)))
        return table in stdout.split('\n')  # Check if the table name is in the list of partitions
```

The updated function handles the case when the table exists by splitting the output (stdout) and checking if the table name is present in the list of tables or partitions.

This should resolve the issue with case sensitivity and properly check for the existence of the table in the database.