The bug in the `table_exists` function seems to be related to the conditional checks and the use of the `run_hive_cmd` and `self.partition_spec` functions. The bug is causing the function to incorrectly return `False` when it should return `True`.

The issue is with how the `run_hive_cmd` function is called with the command string. It seems that the `show tables` and `show partitions` commands are not returning the expected outputs.

To fix this bug, we need to ensure that the `run_hive_cmd` function returns the expected output for the given commands. Additionally, the `self.partition_spec` function should be handling the `partition` parameter correctly.

Here is the corrected version of the function:

```python
class HiveCommandClient(HiveClient):
    def table_exists(self, table, database='default', partition=None):
        if partition is None:
            stdout = run_hive_cmd('use {0}; show tables like "{1}"'.format(database, table))
            return stdout and table in stdout
        else:
            partition_str = ','.join(["{0}='{1}'".format(k, v) for k, v in partition.items()])
            stdout = run_hive_cmd('use {0}; show partitions {1} partition ({2})'.format(database, table, partition_str))
            return bool(stdout)
```

In this corrected version, we made changes to how the `run_hive_cmd` function is called in the conditional branches. We also removed unnecessary quotation marks and added a space after the `like` operator in the first command. We changed the `self.partition_spec(partition)` call to directly build the partition string using a list comprehension and join to format the partition into the correct string. We also simplified the return statements based on the truthiness of the `stdout` variable.