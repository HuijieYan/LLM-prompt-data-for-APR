The bug in the provided function is that it is not correctly handling the partition parameter when calling the `run_hive_cmd` function. It should be passing the partition spec as a string, but it is incorrectly using the `self.partition_spec` method instead. 

To fix this, instead of calling `self.partition_spec(partition)` in the `run_hive_cmd` call, it should construct the partition spec as a string using the dictionary provided in the `partition` parameter.

Here's the corrected version of the function:

```python
def table_exists(self, table, database='default', partition=None):
    if partition is None:
        stdout = run_hive_cmd('use {0}; show tables like "{1}";'.format(database, table))

        return stdout and table in stdout
    else:
        partition_str = ','.join(['{}="{}"'.format(k, v) for k, v in partition.items()])
        stdout = run_hive_cmd('use {0}; show partitions {1} partition ({2});'.format(database, table, partition_str))

        return bool(stdout)
```