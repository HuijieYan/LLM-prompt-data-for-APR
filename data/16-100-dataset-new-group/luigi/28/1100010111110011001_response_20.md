The bug in the `table_exists` function is that it does not properly handle the case when the table is found in the stdout output. It is returning the opposite of what is expected in the first case (where `partition` is `None`). In the second case, it is not correctly returning `True` when the table is found in the output.

To fix the bug, the function needs to properly handle both cases, checking if the table is present in the `stdout` and return `True` if it is found, and `False` otherwise.

Here's the corrected version of the function:

```python
def table_exists(self, table, database='default', partition=None):
    if partition is None:
        stdout = run_hive_cmd('use {0}; show tables like "{1}";'.format(database, table))
        return table in stdout
    else:
        stdout = run_hive_cmd("""use {0}; show partitions {1} partition({2})""".format(database, table, self.partition_spec(partition)))
        return table in stdout
```

With this correction, the function should pass the failing test cases and satisfy the expected input/output variable values provided.