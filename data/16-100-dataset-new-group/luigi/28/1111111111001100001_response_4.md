The bug in the `table_exists` function lies in the `if` condition. When partition is None, the function incorrectly returns True, regardless of the value of stdout. Additionally, when partition is not None, the function always returns True, regardless of the value of stdout. It seems that the function is not correctly checking the output value of the `run_hive_cmd` function.

To fix the bug, the `if` condition should check if the `stdout` contains the table name, and the `else` condition should return the result based on the boolean evaluation of `stdout`.

Here is the corrected version of the `table_exists` function:

```python
def table_exists(self, table, database='default', partition=None):
    if partition is None:
        stdout = run_hive_cmd('use {0}; show tables like "{1}";'.format(database, table))
        return stdout and table in stdout
    else:
        stdout = run_hive_cmd("""use %s; show partitions %s partition
                            (%s)""" % (database, table, self.partition_spec(partition)))
        return bool(stdout)
```

With this correction, the function should now correctly return True only if the table exists, and False otherwise. This should make the function pass the failing test cases.