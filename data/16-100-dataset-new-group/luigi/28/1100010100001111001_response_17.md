The bug in the function `table_exists` seems to be related to how the `stdout` variable is checked. 

The bug seems to be in the condition that checks if `stdout` is not an empty string when looking for the table. In cases 1 and 3, the condition `stdout and table in stdout` will evaluate to `True` because the string `'OK'` (case 1) and `'OK\nmytable'` (case 2) are truthy values. Instead, it should check for an exact match of the table name in the list contained in `stdout` (case 2). The same is true for the partition check.

The suggested strategy for fixing the bug is to split the stdout string and check for an exact match of the table or partition name.

Here is the corrected version of the function:

```python
def table_exists(self, table, database='default', partition=None):
    if partition is None:
        stdout = run_hive_cmd('use {0}; show tables in {1};'.format(database, table))

        return stdout and table in stdout.split()
    else:
        stdout = run_hive_cmd("""use %s; show partitions %s partition
                            (%s)""" % (database, table, self.partition_spec(partition)))

        return table in stdout.split()
```