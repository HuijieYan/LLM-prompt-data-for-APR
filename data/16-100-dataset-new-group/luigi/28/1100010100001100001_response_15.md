The bug in the provided function seems to be related to the handling of the `stdout` variable and the condition for returning True or False. When the function is checking for table existence, it is not correctly parsing the output of the `run_hive_cmd` function and comparing it with the table name.

To fix the bug, we need to modify the function to correctly handle the `stdout` variable and check for the existence of the table.

Here's the corrected version of the function:

```python
def table_exists(self, table, database='default', partition=None):
    if partition is None:
        stdout = run_hive_cmd('use {0}; show tables like "{1}";'.format(database, table))
        return table in stdout
    else:
        stdout = run_hive_cmd("""use {0}; show partitions {1} partition
                        ({2})""".format(database, table, self.partition_spec(partition)))
        return bool(stdout)
```

In this corrected version, we are using the `in` operator to check if the table exists in the `stdout` variable. For the case where partition is not None, we are using the `bool()` function to directly return the truthiness of `stdout`.

This should fix the issue with the buggy function.