The buggy function `table_exists` has a logic error where it checks for the presence of the table name in the output of the `run_hive_cmd` function, but the match is case sensitive. It also fails to properly handle the partition parameter when constructing the hive command.

To fix the bug, we need to modify the `table_exists` function to handle case insensitivity and properly construct the hive command when a partition is provided.

Here's the corrected version of the function:

```python
class HiveCommandClient(HiveClient):
    def table_exists(self, table, database='default', partition=None):
        if partition is None:
            stdout = run_hive_cmd('use {0}; show tables;'.format(database))
            return any(t.lower() == table.lower() for t in stdout.split())
        else:
            partition_str = ', '.join(['{}="{}"'.format(k, v) for k, v in partition.items()])
            stdout = run_hive_cmd('use {0}; show partitions {1} partition ({2});'.format(database, table, partition_str))
            return bool(stdout)
```

With the above fix, the function now correctly checks for table existence in a case-insensitive manner and handles the partition parameter in constructing the hive command.

This corrected function should now pass the failing test cases.

The corrected version of the buggy function which should pass the failing tests:

```python
class HiveCommandClient(HiveClient):
    def table_exists(self, table, database='default', partition=None):
        if partition is None:
            stdout = run_hive_cmd('use {0}; show tables like "{1}";'.format(database, table))
            return stdout and table.lower() in stdout.lower().split('\n')
        else:
            partition_str = ', '.join(['{}="{}"'.format(k, v) for k, v in partition.items()])
            stdout = run_hive_cmd('use {0}; show partitions {1} partition ({2});'.format(database, table, partition_str))
            return bool(stdout)
```