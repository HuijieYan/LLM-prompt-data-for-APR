The bug in the `table_exists` function appears to be related to the comparison of the `stdout` variable with the `table` parameter. In the first test case, the function is returning `False` when it should return `True` because the `stdout` variable contains the value `'OK\nmytable'` which should match the `table` parameter. Similarly, in the second test case, the function returns `False` instead of `True` because the comparison fails due to case sensitivity between the `table` parameter and the value in `stdout`.

To fix the bug, we need to modify the comparison in the `table_exists` function to handle case-insensitivity. We should compare the lowercase versions of the `table` and `stdout` variables to ensure a case-insensitive match.

Here's the corrected version of the `table_exists` function:

```python
def table_exists(self, table, database='default', partition=None):
    if partition is None:
        stdout = run_hive_cmd('use {0}; show tables like "{1}";'.format(database, table))
        return stdout and table.lower() in stdout.lower()
    else:
        stdout = run_hive_cmd("""use %s; show partitions %s partition
                            (%s)""" % (database, table, self.partition_spec(partition)))

        return bool(stdout)
```

In this corrected version, we convert both the `table` and `stdout` variables to lowercase before comparing them, ensuring a case-insensitive match. This modification should fix the bug in the `table_exists` function.