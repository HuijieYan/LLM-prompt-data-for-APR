The bug in the `table_exists` function appears to be related to the way the output (`stdout`) is being checked and processed.

The function checks if `stdout` is not empty and if `table` is in `stdout`. However, it seems that the `stdout` contains not only the table name, but also other data (e.g., 'OK' or partition information). This could lead to incorrect results when checking if the table exists or not.

To fix the bug, we need to update how the `stdout` is processed to ensure that it correctly checks for the existence of the table.

Here's the corrected version of the function:

```python
def table_exists(self, table, database='default', partition=None):
    if partition is None:
        stdout = run_hive_cmd('use {0}; show tables like "{1}";'.format(database, table))

        return stdout and table in stdout.split('\n')
    else:
        stdout = run_hive_cmd("""use %s; show partitions %s partition
                            (%s)""" % (database, table, self.partition_spec(partition)))

        return bool(stdout)
```

In the corrected version, for the case where `partition` is `None`, we split the `stdout` by newline and then check if the `table` is in the list of tables.

In the case where `partition` is not `None`, we simply return whether `stdout` is truthy or not, without any further processing, as we assume that the existence of the partition is sufficient to determine the existence of the table.