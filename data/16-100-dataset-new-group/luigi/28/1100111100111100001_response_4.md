The bug in the `table_exists` function seems to be related to how the function processes the `stdout` variable. The function checks whether the `stdout` variable contains the table name, but it seems that it's not handling the case where the table name is surrounded by other characters correctly.

To fix this bug, we can modify the logic for checking the `stdout` variable. We can split `stdout` by newline characters and then check each line to see if it contains the table name.

Here's the corrected version of the `table_exists` function:

```python
def table_exists(self, table, database='default', partition=None):
    if partition is None:
        stdout = run_hive_cmd('use {0}; show tables like "{1}";'.format(database, table))
        tables = stdout.split('\n')
        return table in tables
    else:
        stdout = run_hive_cmd("""use %s; show partitions %s partition
                            (%s)""" % (database, table, self.partition_spec(partition)))
        return table in stdout
```

This corrected version should handle cases where the table name is surrounded by other characters in the `stdout` variable.