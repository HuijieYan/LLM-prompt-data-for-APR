The bug in the `table_exists` function is that it is not case-insensitive when checking if a table exists in the database. This causes the test cases to fail when the table names have different casing.

The cause of the bug is that the function is not checking for case insensitivity when comparing the table name to the output from the hive command.

To fix the bug, the function should convert both the table name and the output from the hive command to lowercase before comparing them.

Here is the corrected version of the `table_exists` function:

```python
def table_exists(self, table, database='default', partition=None):
    if partition is None:
        stdout = run_hive_cmd('use {0}; show tables like "{1}";'.format(database, table))

        return stdout and table.lower() in stdout.lower()
    else:
        stdout = run_hive_cmd("""use %s; show partitions %s partition
                            (%s)""" % (database, table, self.partition_spec(partition)))

        if stdout:
            return True
        else:
            return False
```

With this correction, the function will be case-insensitive when checking for the existence of a table in the database. This will resolve the failing test cases and address the GitHub issues #896 and #897 related to making `table_exists` case-insensitive.