Based on the provided information, the bug occurs in the `_adjust_bin_edges` function when the timestamp at midnight on a long clock-change day in Cuba is ambiguous. This causes an AmbiguousTimeError to be raised when performing groupby operations with a daily frequency.

To fix this bug, the `_get_time_bins` function should be modified to handle ambiguous timestamps by taking into account the specific situations related to the clock change day in Cuba.

Here's the corrected version of the `_get_time_bins` function:

```python
def _get_time_bins(self, ax):
    if not isinstance(ax, DatetimeIndex):
        raise TypeError(
            "axis must be a DatetimeIndex, but got "
            f"an instance of {type(ax).__name__}"
        )

    if len(ax) == 0:
        binner = labels = DatetimeIndex(data=[], freq=self.freq, name=ax.name)
        return binner, [], labels

    first, last = _get_timestamp_range_edges(
        ax.min(), ax.max(), self.freq, closed=self.closed, base=self.base
    )

    binner = labels = date_range(
        freq=self.freq,
        start=first,
        end=last,
        tz=ax.tz,
        name=ax.name,
        ambiguous="infer",
        nonexistent="shift_forward",
    )

    ax_values = ax.asi8
    binner, bin_edges = self._adjust_bin_edges(binner, ax_values)

    # Check for ambiguous midnight timestamps on clock change day in Cuba
    ambiguous_midnight = ax[ax.indexer_at_time('00:00:00')].tz_localize(None).drop_duplicates()
    if len(ambiguous_midnight) == 2:
        labels = labels.insert(1, ambiguous_midnight[1])

    # general version, knowing nothing about relative frequencies
    bins = lib.generate_bins_dt64(
        ax_values, bin_edges, self.closed, hasnans=ax.hasnans
    )

    if self.closed == "right":
        labels = binner
        if self.label == "right":
            labels = labels[1:]
    elif self.label == "right":
        labels = labels[1:]

    if ax.hasnans:
        binner = binner.insert(0, NaT)
        labels = labels.insert(0, NaT)

    # if we end up with more labels than bins
    # adjust the labels
    # GH4076
    if len(bins) < len(labels):
        labels = labels[: len(bins)]

    return binner, bins, labels
```

In this corrected version, we handle the ambiguous midnight timestamps on the clock change day in Cuba by checking for two distinct timestamps, and if found, inserting the second timestamp in the labels at the correct position.

This fix should address the issue reported in the GitHub thread and allow the failing test `test_downsample_dst_at_midnight` to pass successfully.