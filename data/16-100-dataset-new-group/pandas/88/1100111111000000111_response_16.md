The `pivot_table` function has a bug related to handling multi-index columns. It fails to correctly handle cases where the columns contain a multi-index. This bug has been reported on GitHub with detailed examples, and it's been recognized as a valid issue.

The cause of the bug is that the `pivot_table` function tries to access the `columns` attribute on the result, assuming that it's always a DataFrame, but when multi-index columns are used, the result might be a Series instead.

A possible strategy for fixing this bug is to add a conditional check to verify if the result of the aggregation is a DataFrame or a Series before attempting to access its `columns` attribute. If it's a Series, the function should handle it appropriately to avoid the AttributeError.

The corrected version of the `pivot_table` function is provided below:

```python
# Corrected version of the pivot_table function
# Add conditional checks to handle multi-index columns with Series result

# ... (imports)

# Function definition
@Substitution("\ndata : DataFrame")
@Appender(_shared_docs["pivot_table"], indents=1)
def pivot_table(
    data,
    values=None,
    index=None,
    columns=None,
    aggfunc="mean",
    fill_value=None,
    margins=False,
    dropna=True,
    margins_name="All",
    observed=False,
) -> "DataFrame":
    index = _convert_by(index)
    columns = _convert_by(columns)

    # ... (existing code)

    table = agged

    # Conditionally handle Series result with multi-index columns
    if isinstance(table, ABCDataFrame):
        table = table.sort_index(axis=1)
    else:
        # Handle Series result with multi-index columns
        if isinstance(table.index, MultiIndex):
            table = table.unstack().T
        else:
            # If it's neither an ABCDataFrame nor a Series with MultiIndex, then it's a single-index Series, handle it appropriately
            table = DataFrame(table).T

    # ... (existing code)

    return table
```

With this corrected version, the `pivot_table` function should now handle both single-index and multi-index columns correctly, and it should pass the failing test cases related to multi-index-only pivot tables.