The bug in the function `request_httprepr` is that it incorrectly constructs the HTTP request line and does not handle non-HTTP request schemes such as `file` and `ftp`. 

The cause of the bug is that the function assumes that the scheme of the request URL will always be `http` and does not account for other schemes. This leads to incorrect construction of the path and host fields in the HTTP request.

To fix the bug, the function needs to check the scheme of the request URL and handle non-HTTP schemes appropriately in constructing the HTTP request line.

Here's the corrected version of the `request_httprepr` function:

```python
def request_httprepr(request):
    parsed = urlparse_cached(request)
    if parsed.scheme in ["http", "https"]:
        path = urlunparse(('', '', parsed.path, parsed.params, parsed.query, ''))
        host = parsed.hostname
    else:
        path = parsed.path
        host = parsed.netloc

    s = to_bytes(request.method) + b" " + to_bytes(path) + b" HTTP/1.1\r\n"
    s += b"Host: " + to_bytes(host) + b"\r\n"
    if request.headers:
        s += request.headers.to_string() + b"\r\n"
    s += b"\r\n"
    s += request.body
    return s
```

With this corrected version, the function now properly handles non-HTTP request schemes and constructs the HTTP request line and headers accordingly.

The corrected function should now pass the failing test cases provided.