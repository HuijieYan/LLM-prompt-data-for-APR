The bug in the `request_httprepr` function is that it is incorrectly generating the HTTP representation for non-HTTP requests. It is using `urlunparse` to generate the path part of the HTTP request, which is not appropriate for non-HTTP requests like file or FTP.

To fix the bug, the function should check the scheme of the URL in the request and handle non-HTTP requests differently.

Here is the corrected version of the function:

```python
def request_httprepr(request):
    scheme = urlparse_cached(request).scheme
    if scheme in ['http', 'https']:
        parsed = urlparse_cached(request)
        path = urlunparse(('', '', parsed.path or '/', parsed.params, parsed.query, ''))
        s = to_bytes(request.method) + b" " + to_bytes(path) + b" HTTP/1.1\r\n"
        s += b"Host: " + to_bytes(parsed.hostname) + b"\r\n"
        if request.headers:
            s += request.headers.to_string() + b"\r\n"
        s += b"\r\n"
        s += request.body
        return s
    else:
        return None  # Handle non-HTTP requests differently
```

This corrected version checks the scheme of the URL and only generates the HTTP representation if the scheme is either "http" or "https". For other schemes, it returns `None`.

With this correction, the function should now handle non-HTTP requests correctly and pass the failing test.