The bug in the `request_httprepr` function is that it incorrectly constructs the HTTP representation for non-HTTP requests, specifically for file and FTP schemes. The `parsed.hostname` is not being considered when constructing the `Host:` header, and the HTTP method is being used for non-HTTP requests.

To fix this bug, the function should check the scheme of the request and construct the HTTP representation accordingly. For non-HTTP requests, it should use the scheme-specific information to form the HTTP representation.

Here's the corrected version of the function:

```python
def request_httprepr(request):
    parsed = urlparse_cached(request)
    if parsed.scheme in ('http', 'https'):
        path = urlunparse(('', '', parsed.path or '/', parsed.params, parsed.query, ''))
        s = to_bytes(request.method) + b" " + to_bytes(path) + b" HTTP/1.1\r\n"
        s += b"Host: " + to_bytes(parsed.hostname) + b"\r\n"
        if request.headers:
            s += request.headers.to_string() + b"\r\n"
        s += b"\r\n"
        s += request.body
    else:
        # Handle non-HTTP requests
        path = urlunparse(('', '', parsed.path, parsed.params, parsed.query, ''))
        scheme_prefix = to_bytes(parsed.scheme.upper()) + b" "
        s = scheme_prefix + to_bytes(path) + b" HTTP/1.1\r\n"
        if parsed.hostname:
            s += b"Host: " + to_bytes(parsed.hostname) + b"\r\n"
        s += b"\r\n"
    return s
```

This corrected version of the function checks the scheme of the request and constructs the HTTP representation accordingly. It uses the scheme-specific information for non-HTTP requests and constructs the `Host:` header when available, which fixes the bug. With this correction, the failing test cases should pass.