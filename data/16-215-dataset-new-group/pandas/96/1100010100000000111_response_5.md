Based on the provided GitHub issue, it seems that there is an issue with the application of custom business hours when holidays are included. The function `apply` in the `pandas.tseries.offsets.py` file seems to be incorrectly handling the adjustment of business hours in the presence of holidays. When using `pd.date_range` with custom business hours and adding holidays, it produces more periods than expected.

The issue is likely occurring due to the incorrect adjustment of business hours when holidays are included, causing the `pd.date_range` function to return unexpected results.

To fix the bug, a strategy could be to thoroughly review the logic for adjusting business hours when holidays are involved in the `apply` function. The adjustment logic needs to correctly handle holidays and ensure that the resulting business hours are aligned with the expected behavior of `pd.date_range`. The adjustments should consider the presence of holidays and appropriately calculate the number of business hours.

Here's the corrected version of the `apply` function:

```python
import pandas as pd
from datetime import datetime, timedelta
from pandas.tseries.offsets import ApplyTypeError, CustomBusinessHour

@pd.api.extensions.register_indexer("apply")
def apply(self, other):
    if isinstance(other, datetime):
        # original implementation...
        business_hours = pd.offsets.CustomBusinessHour(start=self.start, end=self.end, holidays=self.holidays)
        
        # use business_hours to adjust the datetime
        return business_hours.rollforward(other)
    else:
        raise ApplyTypeError("Only know how to combine business hour with datetime")
```

In this corrected version, the `apply` function uses the `CustomBusinessHour` object to adjust the datetime, taking into account the holidays. The `rollforward` method of the `CustomBusinessHour` object correctly handles the adjustment to align with the expected behavior of `pd.date_range`.

This corrected implementation should address the issue reported on GitHub and ensure that `pd.date_range` works as expected even with holidays included.