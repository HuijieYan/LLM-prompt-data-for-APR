The buggy function `apply` needs to be updated to account for the edge cases caused by holidays. The function should accurately calculate the adjusted datetime by considering holidays and business hours.

Cause of the bug:
The buggy function does not handle the adjustment of dates for holidays properly, leading to incorrect results when periods and holidays are specified together.

Strategy for fixing the bug:
1. Update the logic in the `apply` function to properly handle the adjustment of dates taking into account holidays and business hours.
2. Ensure that the adjusted datetime avoids the holidays, and the number of periods is correctly accounted for.

Here is the corrected version of the `apply` function:
```python
def apply(self, other):
    if isinstance(other, datetime):
        n = self.n
        businesshours = sum(
            self._get_business_hours_by_sec(st, en)
            for st, en in zip(self.start, self.end)
        )
        
        # Adjust the date for holidays
        if other in self.holidays:
            other = self._next_opening_time(other)
        
        # Perform adjustments based on business hours
        if n >= 0:
            while n > 0:
                other = self._next_opening_time(other)
                n -= 1
        else:
            while n < 0:
                other = self._prev_opening_time(other)
                n += 1
        
        return other
    else:
        raise ApplyTypeError("Only know how to combine business hour with datetime")
```
This corrected version accounts for adjusting datetime with consideration for holidays and correctly applies the adjusted business hours.

By implementing this corrected version, the issue experienced when combining periods and holidays should be resolved, providing accurate datetime outputs.