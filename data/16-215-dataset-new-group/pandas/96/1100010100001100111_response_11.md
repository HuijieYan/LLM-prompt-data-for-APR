The cause of the bug is due to the incorrect adjustment of the business hours when there are holidays specified. This leads to unexpected behavior in the `date_range` function, causing more periods than specified. The issue on GitHub confirms this behavior.

To fix the bug, we need to ensure that the adjustment of business hours takes holidays into account. This can be achieved by modifying the logic in the `apply` function to appropriately adjust the business hours when holidays are present.

Here is the corrected version of the function:

```python
@apply_wraps
def apply(self, other):
    if isinstance(other, datetime):
        n = self.n

        bd, r = divmod(abs(n * 60), self._get_business_hours_by_sec())

        if n < 0:
            bd, r = -bd, -r

        # adjust by business days first
        if bd != 0:
            skip_bd = BusinessDay(n=bd, holidays=self.holidays)
            other = skip_bd.apply(other)

        if r:
            other = self._adjust_business_hours(other, r)

        return other
    else:
        raise ApplyTypeError("Only know how to combine business hour with datetime")
```

In this corrected version, we make use of the `BusinessDay` class to handle adjustments for business days, considering any specified holidays. Additionally, the function `_adjust_business_hours` is used to correctly adjust remaining business hours.

By using these adjustments, the bug causing unexpected behavior with `date_range` when holidays are present should be fixed.