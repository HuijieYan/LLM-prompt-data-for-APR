The bug in the `_get_with` function seems to be related to the `key_type` variable, which is expected to be a string but isn't properly being inferred in the provided cases. It appears that the logic used to infer the `key_type` is not correctly handling the different types of keys that the function should support.

To fix this bug, the logic for inferring the `key_type` should be revisited. It should handle the cases of different key types properly, such as list-like keys, keys with index type, and scalar keys.

Here's the corrected version of the `_get_with` function:

```python
def _get_with(self, key):
    if isinstance(key, slice):
        slobj = self.index._convert_slice_indexer(key, kind="getitem")
        return self._slice(slobj)
    elif isinstance(key, ABCDataFrame):
        raise TypeError(
            "Indexing a Series with DataFrame is not supported, use the appropriate DataFrame column"
        )
    elif isinstance(key, tuple):
        return self._get_values_tuple(key)

    elif is_scalar(key):
        return self.loc[key]

    # Convert key to a list if it's not list-like
    if not is_list_like(key):
        key = [key]

    # Inference of key type based on the input key
    key_type = lib.infer_dtype(key, skipna=False)

    if key_type in ["integer", "mixed-integer"]:
        # Use iloc for positional index and loc for label-based index
        if not self.index._should_fallback_to_positional():
            return self.loc[key]
        else:
            return self.iloc[key]
    else:
        return self.reindex(key)
```

In the corrected version:
- The function checks if the key is a scalar using the `is_scalar` function from pandas. If it is, it directly uses `self.loc` to retrieve the data.
- The key is then converted to a list if it's not list-like, to simplify subsequent operations.
- Finally, the `key_type` is inferred based on the input key using `lib.infer_dtype` function. The function returns the sliced values using `iloc` or `loc` based on the inferred `key_type`.

This revised logic should properly handle the different types of keys and infer the correct `key_type` leading to the correct behavior of the function.

This corrected version should satisfy all the expected input/output values mentioned in the provided cases.