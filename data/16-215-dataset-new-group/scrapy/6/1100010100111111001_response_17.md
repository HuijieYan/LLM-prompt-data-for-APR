The bug in the `convert_image` function is causing the failing tests. The bug is a result of the condition checking for the image format and mode, causing incorrect conversion to RGB. Specifically, the bug is in the part of the code that converts RGBA PNG images to RGB images. The test case is failing to produce the expected output due to the conversion of RGBA to RGB. 

To fix the bug, the code needs to handle RGBA PNG images differently, as well as preserving the transparency information. Additionally, the thumbnail size calculation should be adjusted to maintain the image ratio.

Here's the corrected version of the `convert_image` function:

```python
def convert_image(self, image, size=None):
    if image.format == 'PNG' and image.mode == 'RGBA':
        # Create a new RGBA image with a white background
        background = Image.new('RGBA', image.size, (255, 255, 255))
        background.paste(image, (0, 0), image)
        # Convert the RGBA image with a white background to RGB
        image = background.convert('RGB')
    elif image.mode != 'RGB':
        # Simply convert the image to RGB
        image = image.convert('RGB')

    if size:
        # Copy the image to avoid modifying the original
        img_copy = image.copy()
        # Calculate the thumbnail size to maintain the image ratio
        img_copy.thumbnail(size, Image.ANTIALIAS)
        # Create a new blank image with the specified size and mode
        thumbnail = Image.new('RGB', size, (255, 255, 255))
        # Paste the thumbnail onto the blank image
        thumbnail.paste(img_copy, ((size[0] - img_copy.size[0]) // 2, (size[1] - img_copy.size[1]) // 2))
        # Use the thumbnail as the final image
        image = thumbnail

    buf = BytesIO()
    image.save(buf, 'JPEG')
    return image, buf
```

By implementing these changes, the corrected `convert_image` function should now pass the failing tests and produce the expected output.