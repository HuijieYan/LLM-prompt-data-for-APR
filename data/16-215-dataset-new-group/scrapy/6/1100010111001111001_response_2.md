The bug in the `convert_image` function is causing the failing tests due to incorrect image conversion and resizing. The function is supposed to convert images to the RGB mode and resize them using the provided size if specified. However, it is not handling images with transparency correctly and is not preserving the image ratio during resizing.

The bug is caused by the incorrect handling of images with transparency, as well as the incorrect resizing of images. To fix the bug, we need to add a specific condition to handle images with transparency and ensure that the resizing maintains the image ratio.

Here is the corrected version of the `convert_image` function:

```python
def convert_image(self, image, size=None):
    if image.format == 'PNG' and image.mode == 'RGBA':
        # Create a new RGBA image with a white background and paste the original image onto it
        background = Image.new('RGBA', image.size, (255, 255, 255))
        background.paste(image, image)
        # Convert the image to RGB mode
        image = background.convert('RGB')
    elif image.mode != 'RGB':
        # Convert the image to RGB mode
        image = image.convert('RGB')

    if size:
        # Calculate the new size while preserving the aspect ratio
        image.thumbnail(size, Image.ANTIALIAS)

    # Create a bytes buffer to save the image
    buf = BytesIO()
    image.save(buf, 'JPEG')
    return image, buf
```

With this corrected version, the `convert_image` function now handles images with transparency correctly and preserves the image ratio during resizing. This should ensure that the failing tests pass and the expected input/output values are satisfied.