The bug in the `convert_image` function is causing it to fail the `test_convert_image` test. The failing test is checking that the function correctly converts images to RGB mode and produces thumbnails with the correct size.

The bug occurs when the function tries to convert an image with format 'PNG' and mode 'RGBA'. It creates a new RGBA background image and pastes the original image onto it. Then it converts the combined image to RGB. This is not the correct way to convert RGBA images to RGB. Instead, it should use the `Image.alpha_composite` method to composite the RGBA image onto a white background and then convert it to RGB.

Additionally, after the image is converted to RGB, the function is supposed to create a thumbnail with the specified size, but the way it's being done is incorrect.

To fix the bug in the `convert_image` function:
1. Use the `Image.alpha_composite` method to composite the RGBA image onto a white background.
2. Then convert the combined image to RGB.
3. Finally, create a thumbnail with the specified size using the `thumbnail` method.

Here's the corrected version of the `convert_image` function:

```python
def convert_image(self, image, size=None):
    if image.format == 'PNG' and image.mode == 'RGBA':
        background = Image.new('RGBA', image.size, (255, 255, 255, 255))
        image = Image.alpha_composite(background, image).convert('RGB')
    elif image.mode != 'RGB':
        image = image.convert('RGB')

    if size:
        image.thumbnail(size, Image.ANTIALIAS)

    buf = BytesIO()
    image.save(buf, 'JPEG')
    return image, buf
```