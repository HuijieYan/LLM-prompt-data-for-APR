The bug in the `convert_image` function is caused by not handling the transparency of the image correctly. When the image format is 'PNG' and the image mode is 'RGBA', the function should create a new background and paste the image onto it before converting it to RGB. Additionally, when the image mode is not 'RGB', the function should convert the image to 'RGB'.

The following is the corrected version of the `convert_image` function:

```python
def convert_image(self, image, size=None):
    if image.format == 'PNG' and image.mode == 'RGBA':
        background = Image.new('RGBA', image.size, (255, 255, 255, 255))
        background.paste(image, (0, 0), image)
        image = background.convert('RGB')
    elif image.mode != 'RGB':
        image = image.convert('RGB')

    if size:
        image = image.copy()
        image.thumbnail(size, Image.ANTIALIAS)

    buf = BytesIO()
    image.save(buf, 'JPEG')
    return image, buf
```

With these changes, the `convert_image` function should now handle transparency and image modes correctly, and pass all the failing test cases.