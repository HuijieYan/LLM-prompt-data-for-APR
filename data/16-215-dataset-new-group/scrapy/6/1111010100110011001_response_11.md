The bug in the `convert_image` function is caused by the incorrect conversion of images with RGBA mode and PNG format to RGB format. This results in wrong color values for transparent and semi-transparent pixels, leading to failing test cases.

To fix the bug, we need to correct the logic for converting images with RGBA mode and PNG format to ensure that transparent and semi-transparent pixels are handled correctly.

Here is the corrected version of the `convert_image` function:

```python
def convert_image(self, image, size=None):
        if image.format == 'PNG' and image.mode == 'RGBA':
            background = Image.new('RGBA', image.size, (255, 255, 255, 255))
            background.paste(image, mask=image.split()[3])  # Use the alpha channel as the paste mask
            image = background.convert('RGB')
        elif image.mode != 'RGB':
            image = image.convert('RGB')
    
        if size:
            image = image.copy()
            image.thumbnail(size, Image.ANTIALIAS)
    
        buf = BytesIO()
        image.save(buf, 'JPEG')
        return image, buf
```

With this correction, the function should handle images with different modes and formats correctly, resolving the failing test cases.