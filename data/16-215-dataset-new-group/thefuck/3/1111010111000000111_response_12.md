The issue seems to be related to the info() function in the Fish class of the `fish.py` file, where the Popen call to `fish -c 'echo $FISH_VERSION'` is supposed to retrieve the version of the fish shell but actually returns information containing "fish, version" instead of only the version. This causes the test to fail and results in an infinite loop when used with the Oh-My-Fish plugin.

To fix the bug, the Popen command should be modified to fetch the version correctly. Below is the corrected version of the `info` function:

```python
    def info(self):
        """Returns the name and version of the current shell"""
        proc = Popen(['fish', '--version'],
                     stdout=PIPE, stderr=DEVNULL)
        version = proc.stdout.read().decode('utf-8').strip()
        version = version.split()[-1]
        return u'Fish Shell {}'.format(version)
```

With this update, the Popen command now uses `['fish', '--version']` which returns the full version information. The version is then extracted using string manipulation and formatted correctly to avoid the mentioned bug. This should pass the failing test and resolve the issue posted on GitHub.