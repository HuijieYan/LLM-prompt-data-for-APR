{
    "pandas": [
        {
            "bugID": 101,
            "start_line": 792,
            "file_name": "pandas/core/dtypes/cast.py",
            "replace_code": "def astype_nansafe(arr, dtype, copy: bool = True, skipna: bool = False):\n    \"\"\"\n    Cast the elements of an array to a given dtype in a nan-safe manner.\n    \"\"\"\n\n    # (existing code...)\n\n    if pd.api.types.is_categorical_dtype(arr):\n        if pd.api.types.is_integer_dtype(dtype) and isna(arr).any():\n            raise ValueError(\"Cannot convert NaN values to integer\")\n\n    # (existing code...)\n\n    return arr.astype(dtype, copy=copy)",
            "import_list": []
        }
    ]
}