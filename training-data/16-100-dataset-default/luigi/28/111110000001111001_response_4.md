The bug in the `table_exists` function is that the `stdout` variable is being compared to strings ('OK') instead of being checked for the existence of the table name within it.

One potential way to fix this bug is to modify the comparison check for `stdout` to see if the table name is contained within it.

Here's the corrected code for the `table_exists` function:

```python
def table_exists(self, table, database='default', partition=None):
    if partition is None:
        stdout = run_hive_cmd('use {0}; show tables like "{1}";'.format(database, table))

        return stdout and table in stdout
    else:
        partitions = self.partition_spec(partition)
        stdout = run_hive_cmd('use {0}; show partitions {1} partition ({2})'.format(database, table, partitions))

        return stdout != ''
```

With these changes, the function should now work as expected and satisfy all the provided test cases.