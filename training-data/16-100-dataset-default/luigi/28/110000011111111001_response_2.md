The bug in the function is that it is not handling the case insensitivity for table names. When checking if a table exists, it needs to take into account that the table name might be provided in different cases.

To fix the bug, the function should convert both the table name and the output from the `run_hive_cmd` to lower case before checking if the table exists.

Here's the corrected code for the function:

```python
def table_exists(self, table, database='default', partition=None):
    if partition is None:
        stdout = run_hive_cmd('use {0}; show tables like "{1}";'.format(database, table.lower()))

        return stdout and table.lower() in stdout.lower()
    else:
        stdout = run_hive_cmd("""use %s; show partitions %s partition
                            (%s)""" % (database, table.lower(), self.partition_spec(partition)))

        if stdout:
            return True
        else:
            return False
```

With this correction, the function should handle case insensitivity for table names, and it should pass the failing tests.