The issue appears to be with the sorting of the blocks in the `equals` function. The `canonicalize` function is used to sort the blocks based on their dtype name and locations. However, it seems that the `mgr_locs` attribute is not being accessed correctly in the canonicalize function. Additionally, some of the input and output variable values in the test cases are incorrect, which may be contributing to the incorrect behavior of the function.

To fix the bug, the `canonicalize` function needs to correctly access the `mgr_locs` attribute of the block. Additionally, the input and output variable values in the test cases need to be corrected to accurately reflect the state of the variables at the function's return.

Here is the corrected code for the `equals` function:

```python
def equals(self, other):
    self_axes, other_axes = self.axes, other.axes
    if len(self_axes) != len(other_axes):
        return False
    if not all(ax1.equals(ax2) for ax1, ax2 in zip(self_axes, other_axes)):
        return False
    self._consolidate_inplace()
    other._consolidate_inplace()
    if len(self.blocks) != len(other.blocks):
        return False

    def canonicalize(block):
        return (block.dtype.name, block.mgr_locs.indexer)

    self_blocks = sorted(self.blocks, key=canonicalize)
    other_blocks = sorted(other.blocks, key=canonicalize)
    return all(
        block.equals(oblock) for block, oblock in zip(self_blocks, other_blocks)
    )
```

This corrected code addresses the issues with the canonicalize function and also takes into account the correct values of the input and output variables at the function's return, as provided in the expected test case.

This should resolve the bug and ensure that the `equals` function returns the correct value for the given input parameters, as described in the GitHub issue.