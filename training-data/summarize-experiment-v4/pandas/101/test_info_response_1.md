It seems there is a bug in the `astype_nansafe` function that is causing it to not raise a `ValueError` as expected when trying to convert NaT values to an integer. The error occurs at line 42 inside the function, where it should raise a `ValueError` if it cannot convert non-finite values (NA or inf) to an integer. The failed test message "Cannot convert NaT values to integer" directly relates to this logic in the `astype_nansafe` function.