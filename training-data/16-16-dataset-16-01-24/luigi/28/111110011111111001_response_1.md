The bug in the `table_exists` function is caused by the incorrect handling of the `partition` parameter. When the `partition` parameter is not None, the function is not constructing the command properly and is not checking for the existence of the partition.

To fix the bug, we need to modify the `table_exists` function to properly handle the `partition` parameter and construct the command accordingly.

Here's the corrected code for the `table_exists` function:

```python
def table_exists(self, table, database='default', partition=None):
    if partition is None:
        stdout = run_hive_cmd('use {0}; show tables like "{1}";'.format(database, table))
        return stdout and table in stdout
    else:
        partition_str = '/'.join([f"{k}={v}" for k, v in partition.items()])
        stdout = run_hive_cmd(f"use {database}; show partitions {table} partition ({partition_str})")
        return bool(stdout)
```

With this correction, the function should now properly handle the `partition` parameter and construct the command to check for the existence of the partition. This should address the issues identified in the failing test cases and ensure that the function behaves as expected.