The issue arises from the `_convert_key` function in the `_AtIndexer` class in the file `pandas/core/indexing.py`. The function checks if the keys are of the same type as the index, but there are issues with handling non-integer indexes and integer indexers.

The failing test `test_lookups_datetimelike_values` is failing due to the error message `ValueError: At based indexing on a non-integer index can only have non-integer indexers`.

The cause of the bug is that the `_convert_key` function is not handling the cases where the index is non-integer and integer indexers are used.

To fix the bug, the `_convert_key` function needs to be modified to handle both integer and non-integer indexes and indexers correctly.

Additionally, the related functions such as `get_value` and the class `Float64Index` may also need to be reviewed to ensure consistency.

One possible approach to fix the bug is to update the `_convert_key` function to specifically handle the cases of integer and non-integer indexes and indexers. This can be done by checking the type of the index and the type of the indexers and raising the appropriate errors if they do not match.

Here's the corrected code for the `_convert_key` function:

```python
def _convert_key(self, key, is_setter: bool = False):
    """
    Require the keys to be the same type as the index.
    """
    if is_setter:
        return list(key)

    for ax, i in zip(self.obj.axes, key):
        if ax.is_integer():
            if not isinstance(i, int):
                raise ValueError(
                    "At based indexing on an integer index can only have integer indexers"
                )
        else:
            if isinstance(i, int) and not ax.holds_integer():
                raise ValueError(
                    "At based indexing on a non-integer index can only have non-integer indexers"
                )
    return key
```

This updated function should handle both integer and non-integer indexes and indexers correctly.

After making these changes, the function should pass the failing test and resolve the issue posted in the GitHub repository.