```python
# The corrected function
def pivot_table(
    data,
    values=None,
    index=None,
    columns=None,
    aggfunc="mean",
    fill_value=None,
    margins=False,
    dropna=True,
    margins_name="All",
    observed=False,
) -> "DataFrame":
    values_passed = values is not None

    # If index or columns are not None, convert them to list
    if index is not None:
        index = [index] if not isinstance(index, list) else index
    if columns is not None:
        columns = [columns] if not isinstance(columns, list) else columns

    # Grouping data by keys
    grouped = data.groupby(keys, observed=observed)
    agged = grouped.agg(aggfunc)

    # Generate table based on agged data
    if len(index) == 1 and len(columns) > 1:
        table = agged.unstack(columns)
    elif len(index) > 1 and len(columns) == 1:
        table = agged.unstack(index)
    else:
        table = agged

    # Remove NaN values and downcast integers to floats
    if dropna:
        table = table.dropna(how="all")

        for v in values:
            if (
                isinstance(data[v], pd.Int64Dtype)
                and isinstance(table[v], pd.Float64Dtype)
            ):
                agged[v] = table[v].astype(int)

    # Adjust table and return
    if isinstance(table, pd.DataFrame):
        table = (
            table.sort_index(axis=1)
            .reindex(fill_value, axis=1)
            .reindex(fill_value, axis=0)
        )
    return table
```