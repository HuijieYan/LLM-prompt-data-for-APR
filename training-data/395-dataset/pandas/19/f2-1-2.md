# Error stack trace

```json
[
    [
        "self = <pandas.tests.indexing.multiindex.test_loc.TestMultiIndexLoc object at 0x114beb4c0>\nkey = [2, 4], pos = [0, 1]\n\n    @pytest.mark.parametrize(\"key, pos\", [([2, 4], [0, 1]), ([2], []), ([2, 3], [])])\n    def test_loc_multiindex_list_missing_label(self, key, pos):\n        # GH 27148 - lists with missing labels _do_ raise\n        df = DataFrame(\n            np.random.randn(3, 3),\n            columns=[[2, 2, 4], [6, 8, 10]],\n            index=[[4, 4, 8], [8, 10, 12]],\n        )\n    \n        with pytest.raises(KeyError, match=\"not in index\"):\n>           df.loc[key]",
        "\npandas/tests/indexing/multiindex/test_loc.py:145: Failed"
    ],
    [
        "self = <pandas.tests.indexing.multiindex.test_loc.TestMultiIndexLoc object at 0x114c2d0a0>\nkey = [2], pos = []\n\n    @pytest.mark.parametrize(\"key, pos\", [([2, 4], [0, 1]), ([2], []), ([2, 3], [])])\n    def test_loc_multiindex_list_missing_label(self, key, pos):\n        # GH 27148 - lists with missing labels _do_ raise\n        df = DataFrame(\n            np.random.randn(3, 3),\n            columns=[[2, 2, 4], [6, 8, 10]],\n            index=[[4, 4, 8], [8, 10, 12]],\n        )\n    \n        with pytest.raises(KeyError, match=\"not in index\"):\n>           df.loc[key]",
        "\npandas/tests/indexing/multiindex/test_loc.py:145: Failed"
    ],
    [
        "self = <pandas.tests.indexing.multiindex.test_loc.TestMultiIndexLoc object at 0x114d52f40>\nkey = [2, 3], pos = []\n\n    @pytest.mark.parametrize(\"key, pos\", [([2, 4], [0, 1]), ([2], []), ([2, 3], [])])\n    def test_loc_multiindex_list_missing_label(self, key, pos):\n        # GH 27148 - lists with missing labels _do_ raise\n        df = DataFrame(\n            np.random.randn(3, 3),\n            columns=[[2, 2, 4], [6, 8, 10]],\n            index=[[4, 4, 8], [8, 10, 12]],\n        )\n    \n        with pytest.raises(KeyError, match=\"not in index\"):\n>           df.loc[key]",
        "\npandas/tests/indexing/multiindex/test_loc.py:145: Failed"
    ],
    [
        "self = <pandas.tests.indexing.multiindex.test_slice.TestMultiIndexSlicers object at 0x114d65610>\n\n    def test_per_axis_per_level_getitem(self):\n    \n        # GH6134\n        # example test case\n        ix = MultiIndex.from_product(\n            [_mklbl(\"A\", 5), _mklbl(\"B\", 7), _mklbl(\"C\", 4), _mklbl(\"D\", 2)]\n        )\n        df = DataFrame(np.arange(len(ix.to_numpy())), index=ix)\n    \n        result = df.loc[(slice(\"A1\", \"A3\"), slice(None), [\"C1\", \"C3\"]), :]\n        expected = df.loc[\n            [\n                tuple([a, b, c, d])\n                for a, b, c, d in df.index.values\n                if (a == \"A1\" or a == \"A2\" or a == \"A3\") and (c == \"C1\" or c == \"C3\")\n            ]\n        ]\n        tm.assert_frame_equal(result, expected)\n    \n        expected = df.loc[\n            [\n                tuple([a, b, c, d])\n                for a, b, c, d in df.index.values\n                if (a == \"A1\" or a == \"A2\" or a == \"A3\")\n                and (c == \"C1\" or c == \"C2\" or c == \"C3\")\n            ]\n        ]\n        result = df.loc[(slice(\"A1\", \"A3\"), slice(None), slice(\"C1\", \"C3\")), :]\n        tm.assert_frame_equal(result, expected)\n    \n        # test multi-index slicing with per axis and per index controls\n        index = MultiIndex.from_tuples(\n            [(\"A\", 1), (\"A\", 2), (\"A\", 3), (\"B\", 1)], names=[\"one\", \"two\"]\n        )\n        columns = MultiIndex.from_tuples(\n            [(\"a\", \"foo\"), (\"a\", \"bar\"), (\"b\", \"foo\"), (\"b\", \"bah\")],\n            names=[\"lvl0\", \"lvl1\"],\n        )\n    \n        df = DataFrame(\n            np.arange(16, dtype=\"int64\").reshape(4, 4), index=index, columns=columns\n        )\n        df = df.sort_index(axis=0).sort_index(axis=1)\n    \n        # identity\n        result = df.loc[(slice(None), slice(None)), :]\n        tm.assert_frame_equal(result, df)\n        result = df.loc[(slice(None), slice(None)), (slice(None), slice(None))]\n        tm.assert_frame_equal(result, df)\n        result = df.loc[:, (slice(None), slice(None))]\n        tm.assert_frame_equal(result, df)\n    \n        # index\n        result = df.loc[(slice(None), [1]), :]\n        expected = df.iloc[[0, 3]]\n        tm.assert_frame_equal(result, expected)\n    \n        result = df.loc[(slice(None), 1), :]\n        expected = df.iloc[[0, 3]]\n        tm.assert_frame_equal(result, expected)\n    \n        # columns\n        result = df.loc[:, (slice(None), [\"foo\"])]\n        expected = df.iloc[:, [1, 3]]\n        tm.assert_frame_equal(result, expected)\n    \n        # both\n        result = df.loc[(slice(None), 1), (slice(None), [\"foo\"])]\n        expected = df.iloc[[0, 3], [1, 3]]\n        tm.assert_frame_equal(result, expected)\n    \n        result = df.loc[\"A\", \"a\"]\n        expected = DataFrame(\n            dict(bar=[1, 5, 9], foo=[0, 4, 8]),\n            index=Index([1, 2, 3], name=\"two\"),\n            columns=Index([\"bar\", \"foo\"], name=\"lvl1\"),\n        )\n        tm.assert_frame_equal(result, expected)\n    \n        result = df.loc[(slice(None), [1, 2]), :]\n        expected = df.iloc[[0, 1, 3]]\n        tm.assert_frame_equal(result, expected)\n    \n        # multi-level series\n        s = Series(np.arange(len(ix.to_numpy())), index=ix)\n        result = s.loc[\"A1\":\"A3\", :, [\"C1\", \"C3\"]]\n        expected = s.loc[\n            [\n                tuple([a, b, c, d])\n                for a, b, c, d in s.index.values\n                if (a == \"A1\" or a == \"A2\" or a == \"A3\") and (c == \"C1\" or c == \"C3\")\n            ]\n        ]\n        tm.assert_series_equal(result, expected)\n    \n        # boolean indexers\n        result = df.loc[(slice(None), df.loc[:, (\"a\", \"bar\")] > 5), :]\n        expected = df.iloc[[2, 3]]\n        tm.assert_frame_equal(result, expected)\n    \n        msg = (\n            \"cannot index with a boolean indexer \"\n            \"that is not the same length as the index\"\n        )\n        with pytest.raises(ValueError, match=msg):\n            df.loc[(slice(None), np.array([True, False])), :]\n    \n        with pytest.raises(KeyError, match=r\"\\[1\\] not in index\"):\n            # slice(None) is on the index, [1] is on the columns, but 1 is\n            #  not in the columns, so we raise\n            #  This used to treat [1] as positional GH#16396\n>           df.loc[slice(None), [1]]",
        "\npandas/tests/indexing/multiindex/test_slice.py:125: Failed"
    ],
    [
        "self = <pandas.tests.series.indexing.test_getitem.TestSeriesGetitemListLike object at 0x114d52370>\ndtype = <class 'numpy.int64'>, box = <class 'list'>\n\n    @pytest.mark.parametrize(\"box\", [list, np.array, pd.Index])\n    @pytest.mark.parametrize(\"dtype\", [np.int64, np.float64, np.uint64])\n    def test_getitem_intlist_multiindex_numeric_level(self, dtype, box):\n        # GH#33404 do _not_ fall back to positional since ints are ambiguous\n        idx = pd.Index(range(4)).astype(dtype)\n        dti = date_range(\"2000-01-03\", periods=3)\n        mi = pd.MultiIndex.from_product([idx, dti])\n        ser = Series(range(len(mi))[::-1], index=mi)\n    \n        key = box([5])\n        with pytest.raises(KeyError, match=\"5\"):\n>           ser[key]",
        "\npandas/tests/series/indexing/test_getitem.py:128: Failed"
    ],
    [
        "self = <pandas.tests.series.indexing.test_getitem.TestSeriesGetitemListLike object at 0x114d08160>\ndtype = <class 'numpy.int64'>, box = <built-in function array>\n\n    @pytest.mark.parametrize(\"box\", [list, np.array, pd.Index])\n    @pytest.mark.parametrize(\"dtype\", [np.int64, np.float64, np.uint64])\n    def test_getitem_intlist_multiindex_numeric_level(self, dtype, box):\n        # GH#33404 do _not_ fall back to positional since ints are ambiguous\n        idx = pd.Index(range(4)).astype(dtype)\n        dti = date_range(\"2000-01-03\", periods=3)\n        mi = pd.MultiIndex.from_product([idx, dti])\n        ser = Series(range(len(mi))[::-1], index=mi)\n    \n        key = box([5])\n        with pytest.raises(KeyError, match=\"5\"):\n>           ser[key]",
        "\npandas/tests/series/indexing/test_getitem.py:128: Failed"
    ],
    [
        "self = <pandas.tests.series.indexing.test_getitem.TestSeriesGetitemListLike object at 0x114d5bd00>\ndtype = <class 'numpy.int64'>, box = <class 'pandas.core.indexes.base.Index'>\n\n    @pytest.mark.parametrize(\"box\", [list, np.array, pd.Index])\n    @pytest.mark.parametrize(\"dtype\", [np.int64, np.float64, np.uint64])\n    def test_getitem_intlist_multiindex_numeric_level(self, dtype, box):\n        # GH#33404 do _not_ fall back to positional since ints are ambiguous\n        idx = pd.Index(range(4)).astype(dtype)\n        dti = date_range(\"2000-01-03\", periods=3)\n        mi = pd.MultiIndex.from_product([idx, dti])\n        ser = Series(range(len(mi))[::-1], index=mi)\n    \n        key = box([5])\n        with pytest.raises(KeyError, match=\"5\"):\n>           ser[key]",
        "\npandas/tests/series/indexing/test_getitem.py:128: Failed"
    ],
    [
        "self = <pandas.tests.series.indexing.test_getitem.TestSeriesGetitemListLike object at 0x114e6c250>\ndtype = <class 'numpy.float64'>, box = <class 'list'>\n\n    @pytest.mark.parametrize(\"box\", [list, np.array, pd.Index])\n    @pytest.mark.parametrize(\"dtype\", [np.int64, np.float64, np.uint64])\n    def test_getitem_intlist_multiindex_numeric_level(self, dtype, box):\n        # GH#33404 do _not_ fall back to positional since ints are ambiguous\n        idx = pd.Index(range(4)).astype(dtype)\n        dti = date_range(\"2000-01-03\", periods=3)\n        mi = pd.MultiIndex.from_product([idx, dti])\n        ser = Series(range(len(mi))[::-1], index=mi)\n    \n        key = box([5])\n        with pytest.raises(KeyError, match=\"5\"):\n>           ser[key]",
        "\npandas/tests/series/indexing/test_getitem.py:128: Failed"
    ],
    [
        "self = <pandas.tests.series.indexing.test_getitem.TestSeriesGetitemListLike object at 0x114dd1400>\ndtype = <class 'numpy.float64'>, box = <built-in function array>\n\n    @pytest.mark.parametrize(\"box\", [list, np.array, pd.Index])\n    @pytest.mark.parametrize(\"dtype\", [np.int64, np.float64, np.uint64])\n    def test_getitem_intlist_multiindex_numeric_level(self, dtype, box):\n        # GH#33404 do _not_ fall back to positional since ints are ambiguous\n        idx = pd.Index(range(4)).astype(dtype)\n        dti = date_range(\"2000-01-03\", periods=3)\n        mi = pd.MultiIndex.from_product([idx, dti])\n        ser = Series(range(len(mi))[::-1], index=mi)\n    \n        key = box([5])\n        with pytest.raises(KeyError, match=\"5\"):\n>           ser[key]",
        "\npandas/tests/series/indexing/test_getitem.py:128: Failed"
    ],
    [
        "self = <pandas.tests.series.indexing.test_getitem.TestSeriesGetitemListLike object at 0x114d5b0d0>\ndtype = <class 'numpy.float64'>, box = <class 'pandas.core.indexes.base.Index'>\n\n    @pytest.mark.parametrize(\"box\", [list, np.array, pd.Index])\n    @pytest.mark.parametrize(\"dtype\", [np.int64, np.float64, np.uint64])\n    def test_getitem_intlist_multiindex_numeric_level(self, dtype, box):\n        # GH#33404 do _not_ fall back to positional since ints are ambiguous\n        idx = pd.Index(range(4)).astype(dtype)\n        dti = date_range(\"2000-01-03\", periods=3)\n        mi = pd.MultiIndex.from_product([idx, dti])\n        ser = Series(range(len(mi))[::-1], index=mi)\n    \n        key = box([5])\n        with pytest.raises(KeyError, match=\"5\"):\n>           ser[key]",
        "\npandas/tests/series/indexing/test_getitem.py:128: Failed"
    ],
    [
        "self = <pandas.tests.series.indexing.test_getitem.TestSeriesGetitemListLike object at 0x114dd1970>\ndtype = <class 'numpy.uint64'>, box = <class 'list'>\n\n    @pytest.mark.parametrize(\"box\", [list, np.array, pd.Index])\n    @pytest.mark.parametrize(\"dtype\", [np.int64, np.float64, np.uint64])\n    def test_getitem_intlist_multiindex_numeric_level(self, dtype, box):\n        # GH#33404 do _not_ fall back to positional since ints are ambiguous\n        idx = pd.Index(range(4)).astype(dtype)\n        dti = date_range(\"2000-01-03\", periods=3)\n        mi = pd.MultiIndex.from_product([idx, dti])\n        ser = Series(range(len(mi))[::-1], index=mi)\n    \n        key = box([5])\n        with pytest.raises(KeyError, match=\"5\"):\n>           ser[key]",
        "\npandas/tests/series/indexing/test_getitem.py:128: Failed"
    ],
    [
        "self = <pandas.tests.series.indexing.test_getitem.TestSeriesGetitemListLike object at 0x114d48700>\ndtype = <class 'numpy.uint64'>, box = <built-in function array>\n\n    @pytest.mark.parametrize(\"box\", [list, np.array, pd.Index])\n    @pytest.mark.parametrize(\"dtype\", [np.int64, np.float64, np.uint64])\n    def test_getitem_intlist_multiindex_numeric_level(self, dtype, box):\n        # GH#33404 do _not_ fall back to positional since ints are ambiguous\n        idx = pd.Index(range(4)).astype(dtype)\n        dti = date_range(\"2000-01-03\", periods=3)\n        mi = pd.MultiIndex.from_product([idx, dti])\n        ser = Series(range(len(mi))[::-1], index=mi)\n    \n        key = box([5])\n        with pytest.raises(KeyError, match=\"5\"):\n>           ser[key]",
        "\npandas/tests/series/indexing/test_getitem.py:128: Failed"
    ],
    [
        "self = <pandas.tests.series.indexing.test_getitem.TestSeriesGetitemListLike object at 0x114d52eb0>\ndtype = <class 'numpy.uint64'>, box = <class 'pandas.core.indexes.base.Index'>\n\n    @pytest.mark.parametrize(\"box\", [list, np.array, pd.Index])\n    @pytest.mark.parametrize(\"dtype\", [np.int64, np.float64, np.uint64])\n    def test_getitem_intlist_multiindex_numeric_level(self, dtype, box):\n        # GH#33404 do _not_ fall back to positional since ints are ambiguous\n        idx = pd.Index(range(4)).astype(dtype)\n        dti = date_range(\"2000-01-03\", periods=3)\n        mi = pd.MultiIndex.from_product([idx, dti])\n        ser = Series(range(len(mi))[::-1], index=mi)\n    \n        key = box([5])\n        with pytest.raises(KeyError, match=\"5\"):\n>           ser[key]",
        "\npandas/tests/series/indexing/test_getitem.py:128: Failed"
    ]
]
```
