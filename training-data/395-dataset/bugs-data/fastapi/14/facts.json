{
    "1.1.1": null,
    "1.1.2": null,
    "1.2.1": null,
    "1.2.2": null,
    "1.2.3": null,
    "1.3.1": "/Volumes/SSD2T/bgp_envs/repos/fastapi_14/fastapi/openapi/models.py",
    "1.3.2": null,
    "1.4.1": [
        "def test_additional_properties_schema():\n    response = client.get(\"/openapi.json\")\n    assert response.status_code == 200\n    assert response.json() == openapi_schema"
    ],
    "1.4.2": [
        "/Volumes/SSD2T/bgp_envs/repos/fastapi_14/tests/test_additional_properties.py"
    ],
    "2.1.1": [
        [
            "E       AssertionError: assert {'components': {'schemas': {'HTTPValidationError': {'properties': {'detail': {'items': {'$ref': '#/components/schemas/ValidationError'},\\n                                                                              'title': 'Detail',\\n                                                                              'type': 'array'}},\\n                                                    'title': 'HTTPValidationError',\\n                                                    'type': 'object'},\\n                            'Items': {'properties': {'items': {'additionalProperties': True,\\n                                                               'title': 'Items',\\n                                                               'type': 'object'}},\\n                                      'required': ['items'],\\n                                      'title': 'Items',\\n                                      'type': 'object'},\\n                            'ValidationError': {'properties': {'loc': {'items': {'type': 'string'},\\n                                                                       'title': 'Location',\\n                                                                       'type': 'array'},\\n                                                               'msg': {'title': 'Message',\\n                                                                       'type': 'string'},\\n                                                               'type': {'title': 'Error '\\n                                                                                 'Type',\\n                                                                        'type': 'string'}},\\n                                                'required': ['loc',\\n                                                             'msg',\\n                                                             'type'],\\n                                                'title': 'ValidationError',\\n                                                'type': 'object'}}},\\n 'info': {'title': 'Fast API', 'version': '0.1.0'},\\n 'openapi': '3.0.2',\\n 'paths': {'/foo': {'post': {'operationId': 'foo_foo_post',\\n                             'requestBody': {'content': {'application/json': {'schema': {'$ref': '#/components/schemas/Items'}}},\\n                                             'required': True},\\n                             'responses': {'200': {'content': {'application/json': {'schema': {}}},\\n                                                   'description': 'Successful '\\n                                                                  'Response'},\\n                                           '422': {'content': {'application/json': {'schema': {'$ref': '#/components/schemas/HTTPValidationError'}}},\\n                                                   'description': 'Validation '\\n                                                                  'Error'}},\\n                             'summary': 'Foo Post'}}}} == {'components': {'schemas': {'HTTPValidationError': {'properties': {'detail': {'items': {'$ref': '#/components/schemas/ValidationError'},\\n                                                                              'title': 'Detail',\\n                                                                              'type': 'array'}},\\n                                                    'title': 'HTTPValidationError',\\n                                                    'type': 'object'},\\n                            'Items': {'properties': {'items': {'additionalProperties': {'type': 'integer'},\\n                                                               'title': 'Items',\\n                                                               'type': 'object'}},\\n                                      'required': ['items'],\\n                                      'title': 'Items',\\n                                      'type': 'object'},\\n                            'ValidationError': {'properties': {'loc': {'items': {'type': 'string'},\\n                                                                       'title': 'Location',\\n                                                                       'type': 'array'},\\n                                                               'msg': {'title': 'Message',\\n                                                                       'type': 'string'},\\n                                                               'type': {'title': 'Error '\\n                                                                                 'Type',\\n                                                                        'type': 'string'}},\\n                                                'required': ['loc',\\n                                                             'msg',\\n                                                             'type'],\\n                                                'title': 'ValidationError',\\n                                                'type': 'object'}}},\\n 'info': {'title': 'Fast API', 'version': '0.1.0'},\\n 'openapi': '3.0.2',\\n 'paths': {'/foo': {'post': {'operationId': 'foo_foo_post',\\n                             'requestBody': {'content': {'application/json': {'schema': {'$ref': '#/components/schemas/Items'}}},\\n                                             'required': True},\\n                             'responses': {'200': {'content': {'application/json': {'schema': {}}},\\n                                                   'description': 'Successful '\\n                                                                  'Response'},\\n                                           '422': {'content': {'application/json': {'schema': {'$ref': '#/components/schemas/HTTPValidationError'}}},\\n                                                   'description': 'Validation '\\n                                                                  'Error'}},\\n                             'summary': 'Foo Post'}}}}\nE         Common items:\nE         {'info': {'title': 'Fast API', 'version': '0.1.0'},\nE          'openapi': '3.0.2',\nE          'paths': {'/foo': {'post': {'operationId': 'foo_foo_post',\nE                                      'requestBody': {'content': {'application/json': {'schema': {'$ref': '#/components/schemas/Items'}}},\nE                                                      'required': True},\nE                                      'responses': {'200': {'content': {'application/json': {'schema': {}}},\nE                                                            'description': 'Successful '\nE                                                                           'Response'},\nE                                                    '422': {'content': {'application/json': {'schema': {'$ref': '#/components/schemas/HTTPValidationError'}}},\nE                                                            'description': 'Validation '\nE                                                                           'Error'}},\nE                                      'summary': 'Foo Post'}}}}\nE         Differing items:\nE         {'components': {'schemas': {'HTTPValidationError': {'properties': {'detail': {'items': {...}, 'title': 'Detail', 'type... 'Error Type', 'type': 'string'}}, 'required': ['loc', 'msg', 'type'], 'title': 'ValidationError', 'type': 'object'}}}} != {'components': {'schemas': {'HTTPValidationError': {'properties': {'detail': {'items': {...}, 'title': 'Detail', 'type... 'Error Type', 'type': 'string'}}, 'required': ['loc', 'msg', 'type'], 'title': 'ValidationError', 'type': 'object'}}}}\nE         Full diff:\nE           {\nE            'components': {'schemas': {'HTTPValidationError': {'properties': {'detail': {'items': {'$ref': '#/components/schemas/ValidationError'},\nE                                                                                         'title': 'Detail',\nE                                                                                         'type': 'array'}},\nE                                                               'title': 'HTTPValidationError',\nE                                                               'type': 'object'},\nE         -                             'Items': {'properties': {'items': {'additionalProperties': {'type': 'integer'},\nE         ?                                                                                        ^^^^^ -------------\nE         +                             'Items': {'properties': {'items': {'additionalProperties': True,\nE         ?                                                                                        ^^^\nE                                                                          'title': 'Items',\nE                                                                          'type': 'object'}},\nE                                                 'required': ['items'],\nE                                                 'title': 'Items',\nE                                                 'type': 'object'},\nE                                       'ValidationError': {'properties': {'loc': {'items': {'type': 'string'},\nE                                                                                  'title': 'Location',\nE                                                                                  'type': 'array'},\nE                                                                          'msg': {'title': 'Message',\nE                                                                                  'type': 'string'},\nE                                                                          'type': {'title': 'Error '\nE                                                                                            'Type',\nE                                                                                   'type': 'string'}},\nE                                                           'required': ['loc',\nE                                                                        'msg',\nE                                                                        'type'],\nE                                                           'title': 'ValidationError',\nE                                                           'type': 'object'}}},\nE            'info': {'title': 'Fast API', 'version': '0.1.0'},\nE            'openapi': '3.0.2',\nE            'paths': {'/foo': {'post': {'operationId': 'foo_foo_post',\nE                                        'requestBody': {'content': {'application/json': {'schema': {'$ref': '#/components/schemas/Items'}}},\nE                                                        'required': True},\nE                                        'responses': {'200': {'content': {'application/json': {'schema': {}}},\nE                                                              'description': 'Successful '\nE                                                                             'Response'},\nE                                                      '422': {'content': {'application/json': {'schema': {'$ref': '#/components/schemas/HTTPValidationError'}}},\nE                                                              'description': 'Validation '\nE                                                                             'Error'}},\nE                                        'summary': 'Foo Post'}}},\nE           }"
        ]
    ],
    "2.1.2": [
        [
            "def test_additional_properties_schema():\n        response = client.get(\"/openapi.json\")\n        assert response.status_code == 200\n>       assert response.json() == openapi_schema",
            "\ntests/test_additional_properties.py:104: AssertionError"
        ]
    ],
    "2.1.3": null,
    "2.1.4": null,
    "2.1.5": null,
    "2.1.6": null,
    "3.1.1": [
        "FastAPI does not set additionalProperties correctly when dealing with Dicts.\n"
    ],
    "3.1.2": [
        "Describe the bug\nWhen creating the schema for a Dict FastAPI sets \"additionalProperties\": true instead of setting it to the schema of the values. This does not appear to be an issue with pydantic.\n\nTo Reproduce\nA minimal working example is:\n\nfrom typing import Dict\n\nfrom fastapi import FastAPI\nfrom pydantic import BaseModel\n\n\napp = FastAPI()\n\n\nclass Items(BaseModel):\n\titems: Dict[str, int]\n\n\n@app.post(\"/foo\")\ndef foo(items: Items):\n\treturn items.items\nPut this in a file called test.py and run it with uvicorn test:app. The JSON returned from the openapi.json endpoint is:\n\n{\"openapi\":\"3.0.2\",\"info\":{\"title\":\"Fast API\",\"version\":\"0.1.0\"},\"paths\":{\"/foo\":{\"post\":{\"responses\":{\"200\":{\"description\":\"Successful Response\",\"content\":{\"application/json\":{\"schema\":{}}}},\"422\":{\"description\":\"Validation Error\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/HTTPValidationError\"}}}}},\"summary\":\"Foo Post\",\"operationId\":\"foo_foo_post\",\"requestBody\":{\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/Items\"}}},\"required\":true}}}},\"components\":{\"schemas\":{\"Items\":{\"title\":\"Items\",\"required\":[\"items\"],\"type\":\"object\",\"properties\":{\"items\":{\"title\":\"Items\",\"type\":\"object\",\"additionalProperties\":true}}},\"ValidationError\":{\"title\":\"ValidationError\",\"required\":[\"loc\",\"msg\",\"type\"],\"type\":\"object\",\"properties\":{\"loc\":{\"title\":\"Location\",\"type\":\"array\",\"items\":{\"type\":\"string\"}},\"msg\":{\"title\":\"Message\",\"type\":\"string\"},\"type\":{\"title\":\"Error Type\",\"type\":\"string\"}}},\"HTTPValidationError\":{\"title\":\"HTTPValidationError\",\"type\":\"object\",\"properties\":{\"detail\":{\"title\":\"Detail\",\"type\":\"array\",\"items\":{\"$ref\":\"#/components/schemas/ValidationError\"}}}}}}}\nIn particular the schema for Items is:\n\n{\"title\":\"Items\",\"required\":[\"items\"],\"type\":\"object\",\"properties\":{\"items\":{\"title\":\"Items\",\"type\":\"object\",\"additionalProperties\":true}}}\nExpected behavior\nThe additionalProperties should be {'type': 'integer'} as it is when using pydantic directly:\n\nPython 3.7.2 (default, Dec 24 2018, 03:41:55) \n[GCC 7.4.0] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import test\nWARNING:root:email-validator not installed, email fields will be treated as str.\nTo install, run: pip install email-validator\n>>> test.Items.schema()\n{'title': 'Items', 'type': 'object', 'properties': {'items': {'title': 'Items', 'type': 'object', 'additionalProperties': {'type': 'integer'}}}, 'required': ['items']}\n>>>\nEnvironment:\n\nOS: Linux\nFastAPI Version 0.8.0\nPython Version 3.7.2\n$ pip list\nPackage    Version\n---------- -------\nClick      7.0    \nfastapi    0.8.0  \nh11        0.8.1  \nhttptools  0.0.13 \npip        18.1   \npydantic   0.18.2 \nsetuptools 40.6.2 \nstarlette  0.11.1 \nuvicorn    0.6.1  \nuvloop     0.12.1 \nwebsockets 7.0\n"
    ]
}