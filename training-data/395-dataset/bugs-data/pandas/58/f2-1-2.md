# Error stack trace

```json
[
    [
        "self = <pandas.tests.arrays.categorical.test_constructors.TestCategoricalConstructors object at 0x11cffc4c0>\n\n    def test_from_codes_with_nullable_int(self):\n        codes = pd.array([0, 1], dtype=\"Int64\")\n        categories = [\"a\", \"b\"]\n    \n>       result = Categorical.from_codes(codes, categories=categories)\n\npandas/tests/arrays/categorical/test_constructors.py:567: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\ncls = <class 'pandas.core.arrays.categorical.Categorical'>\ncodes = array([0, 1], dtype=object), categories = ['a', 'b'], ordered = None\ndtype = CategoricalDtype(categories=['a', 'b'], ordered=None)\n\n    @classmethod\n    def from_codes(cls, codes, categories=None, ordered=None, dtype=None):\n        \"\"\"\n        Make a Categorical type from codes and categories or dtype.\n    \n        This constructor is useful if you already have codes and\n        categories/dtype and so do not need the (computation intensive)\n        factorization step, which is usually done on the constructor.\n    \n        If your data does not follow this convention, please use the normal\n        constructor.\n    \n        Parameters\n        ----------\n        codes : array-like of int\n            An integer array, where each integer points to a category in\n            categories or dtype.categories, or else is -1 for NaN.\n        categories : index-like, optional\n            The categories for the categorical. Items need to be unique.\n            If the categories are not given here, then they must be provided\n            in `dtype`.\n        ordered : bool, optional\n            Whether or not this categorical is treated as an ordered\n            categorical. If not given here or in `dtype`, the resulting\n            categorical will be unordered.\n        dtype : CategoricalDtype or \"category\", optional\n            If :class:`CategoricalDtype`, cannot be used together with\n            `categories` or `ordered`.\n    \n            .. versionadded:: 0.24.0\n    \n               When `dtype` is provided, neither `categories` nor `ordered`\n               should be provided.\n    \n        Returns\n        -------\n        Categorical\n    \n        Examples\n        --------\n        >>> dtype = pd.CategoricalDtype(['a', 'b'], ordered=True)\n        >>> pd.Categorical.from_codes(codes=[0, 1, 0, 1], dtype=dtype)\n        [a, b, a, b]\n        Categories (2, object): [a < b]\n        \"\"\"\n        dtype = CategoricalDtype._from_values_or_dtype(\n            categories=categories, ordered=ordered, dtype=dtype\n        )\n        if dtype.categories is None:\n            msg = (\n                \"The categories must be provided in 'categories' or \"\n                \"'dtype'. Both were None.\"\n            )\n            raise ValueError(msg)\n    \n        codes = np.asarray(codes)  # #21767\n        if len(codes) and not is_integer_dtype(codes):\n>           raise ValueError(\"codes need to be array-like integers\")",
        "\npandas/core/arrays/categorical.py:649: ValueError"
    ],
    [
        "self = <pandas.tests.arrays.categorical.test_constructors.TestCategoricalConstructors object at 0x11d054a30>\n\n    def test_from_codes_with_nullable_int_na_raises(self):\n        codes = pd.array([0, None], dtype=\"Int64\")\n        categories = [\"a\", \"b\"]\n    \n        msg = \"codes cannot contain NA values\"\n        with pytest.raises(ValueError, match=msg):\n>           Categorical.from_codes(codes, categories=categories)\n\npandas/tests/arrays/categorical/test_constructors.py:578: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\ncls = <class 'pandas.core.arrays.categorical.Categorical'>\ncodes = array([0, <NA>], dtype=object), categories = ['a', 'b'], ordered = None\ndtype = CategoricalDtype(categories=['a', 'b'], ordered=None)\n\n    @classmethod\n    def from_codes(cls, codes, categories=None, ordered=None, dtype=None):\n        \"\"\"\n        Make a Categorical type from codes and categories or dtype.\n    \n        This constructor is useful if you already have codes and\n        categories/dtype and so do not need the (computation intensive)\n        factorization step, which is usually done on the constructor.\n    \n        If your data does not follow this convention, please use the normal\n        constructor.\n    \n        Parameters\n        ----------\n        codes : array-like of int\n            An integer array, where each integer points to a category in\n            categories or dtype.categories, or else is -1 for NaN.\n        categories : index-like, optional\n            The categories for the categorical. Items need to be unique.\n            If the categories are not given here, then they must be provided\n            in `dtype`.\n        ordered : bool, optional\n            Whether or not this categorical is treated as an ordered\n            categorical. If not given here or in `dtype`, the resulting\n            categorical will be unordered.\n        dtype : CategoricalDtype or \"category\", optional\n            If :class:`CategoricalDtype`, cannot be used together with\n            `categories` or `ordered`.\n    \n            .. versionadded:: 0.24.0\n    \n               When `dtype` is provided, neither `categories` nor `ordered`\n               should be provided.\n    \n        Returns\n        -------\n        Categorical\n    \n        Examples\n        --------\n        >>> dtype = pd.CategoricalDtype(['a', 'b'], ordered=True)\n        >>> pd.Categorical.from_codes(codes=[0, 1, 0, 1], dtype=dtype)\n        [a, b, a, b]\n        Categories (2, object): [a < b]\n        \"\"\"\n        dtype = CategoricalDtype._from_values_or_dtype(\n            categories=categories, ordered=ordered, dtype=dtype\n        )\n        if dtype.categories is None:\n            msg = (\n                \"The categories must be provided in 'categories' or \"\n                \"'dtype'. Both were None.\"\n            )\n            raise ValueError(msg)\n    \n        codes = np.asarray(codes)  # #21767\n        if len(codes) and not is_integer_dtype(codes):\n>           raise ValueError(\"codes need to be array-like integers\")",
        "\npandas/core/arrays/categorical.py:649: ValueError\n\nDuring handling of the above exception, another exception occurred:\n\nself = <pandas.tests.arrays.categorical.test_constructors.TestCategoricalConstructors object at 0x11d054a30>\n\n    def test_from_codes_with_nullable_int_na_raises(self):\n        codes = pd.array([0, None], dtype=\"Int64\")\n        categories = [\"a\", \"b\"]\n    \n        msg = \"codes cannot contain NA values\"\n        with pytest.raises(ValueError, match=msg):\n>           Categorical.from_codes(codes, categories=categories)",
        "\npandas/tests/arrays/categorical/test_constructors.py:578: AssertionError"
    ]
]
```
