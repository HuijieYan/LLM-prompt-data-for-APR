```python
def _parse_scatter_color_args(c, edgecolors, kwargs, xsize, get_next_color_func):
    # ... omitted code ...
    pass

def get_next_color():
    # ... omitted code ...
    pass


def scatter(self, x, y, s=None, c=None, marker=None, cmap=None, norm=None,
                    vmin=None, vmax=None, alpha=None, linewidths=None,
                    verts=None, edgecolors=None, *, plotnonfinite=False,
                    **kwargs):
    self._process_unit_info(xdata=x, ydata=y, kwargs=kwargs)
    x = self.convert_xunits(x)
    y = self.convert_yunits(y)

# rest of the function omitted as it was too long to process

return collection

```