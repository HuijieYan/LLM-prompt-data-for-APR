# Error stack trace

```json
[
    [
        "self = <test_black.BlackTestCase testMethod=test_python2_print_function>\n\n    @patch(\"black.dump_to_file\", dump_to_stderr)\n    def test_python2_print_function(self) -> None:\n        source, expected = read_data(\"python2_print_function\")\n        mode = black.FileMode(target_versions={black.TargetVersion.PY27})\n>       actual = fs(source, mode=mode)\n\ntests/test_black.py:468: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nblack.py:669: in format_str\n    src_node = lib2to3_parse(src_contents.lstrip(), mode.target_versions)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nsrc_txt = \"#!/usr/bin/env python2\\nfrom __future__ import print_function\\n\\nprint('hello')\\nprint(u'hello')\\nprint(a, file=sys.stderr)\\n\"\ntarget_versions = {<TargetVersion.PY27: 2>}\n\n    def lib2to3_parse(src_txt: str, target_versions: Iterable[TargetVersion] = ()) -> Node:\n        \"\"\"Given a string with source, return the lib2to3 Node.\"\"\"\n        if src_txt[-1:] != \"\\n\":\n            src_txt += \"\\n\"\n    \n        for grammar in get_grammars(set(target_versions)):\n            drv = driver.Driver(grammar, pytree.convert)\n            try:\n                result = drv.parse_string(src_txt, True)\n                break\n    \n            except ParseError as pe:\n                lineno, column = pe.context[1]\n                lines = src_txt.splitlines()\n                try:\n                    faulty_line = lines[lineno - 1]\n                except IndexError:\n                    faulty_line = \"<line number missing in source>\"\n                exc = InvalidInput(f\"Cannot parse: {lineno}:{column}: {faulty_line}\")\n        else:\n>           raise exc from None",
        "\nblack.py:758: InvalidInput"
    ]
]
```
