The bug in the `is_gzipped` function is that it only checks for exact matches of `b'application/x-gzip'` and `b'application/gzip'` in the `Content-Type` header. This means that if the `Content-Type` includes extra parameters like `charset=utf-8`, the function will return False, even if the response is actually gzipped.

To fix the bug, we need to modify the function to check if the `Content-Type` header contains `gzip` regardless of any additional parameters.

Here's the corrected code for the `is_gzipped` function:

```python
def is_gzipped(response):
    ctype = response.headers.get('Content-Type', b'')
    return b'gzip' in ctype
```