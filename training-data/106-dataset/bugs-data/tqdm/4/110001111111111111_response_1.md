The error occurs in the `format_meter` function in the `tqdm/_tqdm.py` file. The error message indicates that the `total` variable is of type `NoneType` and it is being used in a multiplication operation, leading to a `TypeError`.

The reason behind the occurrence of the bug is that the `total` variable is set to `None` in the `format_meter` function's sanity check, and later in the code, it is being multiplied by the `unit_scale` variable, which is an integer. Since `None` cannot be multiplied by an integer, it results in a `TypeError`.

To fix this bug, we need to handle the `None` value of `total` differently when applying the custom scale. We can set `total` to a default value of 0 if it is `None` before applying the custom scale.

Here's the corrected code for the `format_meter` function:

```python
@staticmethod
def format_meter(n, total, elapsed, ncols=None, prefix='', ascii=False,
                 unit='it', unit_scale=False, rate=None, bar_format=None,
                 postfix=None, unit_divisor=1000, **extra_kwargs):
    """
    Return a string-based progress bar given some parameters
    
    ... (function documentation remains the same) ...
    
    Returns
    -------
    out  : Formatted meter and stats, ready to display.
    """

    # sanity check: total
    if total and n > total:
        total = None

    # handle None value for total before applying custom scale
    if total is None:
        total = 0

    # apply custom scale if necessary
    if unit_scale and unit_scale not in (True, 1):
        total *= unit_scale
        n *= unit_scale
        if rate:
            rate *= unit_scale  # by default rate = 1 / self.avg_time
        unit_scale = False

    # rest of the function code remains unchanged
```

By handling the `None` value for `total` before applying the custom scale, we prevent the `TypeError` from occurring.