Sure, here's the full code of the fixed function:

```python
import numpy as np

def array_equivalent(left, right, strict_nan=False):
    left, right = np.asarray(left), np.asarray(right)

    # shape compat
    if left.shape != right.shape:
        return False

    # Object arrays can contain None, NaN and NaT.
    if np.issubdtype(left.dtype, np.object_) and np.issubdtype(right.dtype, np.object_):
        if not strict_nan:
            # isna considers NaN and None to be equivalent.
            return np.array_equal(left.ravel(), right.ravel())
        else:
            return (left == right).all()

    # NaNs can occur in float and complex arrays.
    if (np.issubdtype(left.dtype, np.floating) or np.issubdtype(left.dtype, np.complexfloating)) and \
       (np.issubdtype(right.dtype, np.floating) or np.issubdtype(right.dtype, np.complexfloating)):
        return ((left == right) | (np.isnan(left) & np.isnan(right))).all()

    return np.array_equal(left, right)
```