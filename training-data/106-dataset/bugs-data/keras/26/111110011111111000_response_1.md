```python
def rnn(step_function, inputs, initial_states,
        go_backwards=False, mask=None, constants=None,
        unroll=False, input_length=None):
    """Iterates over the time dimension of a tensor.

    # Arguments
    # ... (same as before)

    # Returns
    # ... (same as before)

    # Raises
    # ... (same as before)
    """
    import tensorflow as tf

    # Existing function code goes here

    return last_output, outputs, new_states
```