The error is occurring because the `value` in the `request_headers` dictionary is sometimes `None`, and the function is trying to call the `decode` method on it, which results in the `'NoneType' object has no attribute 'decode'` error.

To fix this bug, we can check if the `value` is `None` before trying to decode it. If it's `None`, we can skip the decoding step.

Here's the corrected code for the `update_headers` function:

```python
# class declaration containing the updated function
class Session(BaseConfigDict):
    # ... omitted code ...

    # this is the updated function
    def update_headers(self, request_headers):
        """
        Update the session headers with the request ones while ignoring
        certain name prefixes.

        :type request_headers: dict
        """
        for name, value in request_headers.items():
            if value is not None:  # check if value is not None
                value = value.decode('utf8')
            
            if name == 'User-Agent' and value.startswith('HTTPie/'):
                continue

            for prefix in SESSION_IGNORED_HEADER_PREFIXES:
                if name.lower().startswith(prefix.lower()):
                    break
            else:
                self['headers'][name] = value
```

With this adjustment, the function will first check if the `value` is `None` before trying to decode it, avoiding the `'NoneType' object has no attribute 'decode'` error.