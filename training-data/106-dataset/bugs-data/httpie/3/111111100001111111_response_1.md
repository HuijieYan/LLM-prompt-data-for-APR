The error occurs because the `value` variable is being decoded using the `decode` method, which is not valid if the value is `None`, as seen in the error message `'NoneType' object has no attribute 'decode'`.

To fix this bug, we need to handle the case where `value` is `None`. We can also update the code to handle the case where `name` is `None`, as it is not explicitly defined in the code provided.

Here is the corrected code for the `update_headers` method:

```python
def update_headers(self, request_headers):
    """
    Update the session headers with the request ones while ignoring
    certain name prefixes.

    :type request_headers: dict

    """
    for name, value in request_headers.items():
        if value is not None:
            if isinstance(value, bytes):
                value = value.decode('utf8')
            if name is not None:
                if name == 'User-Agent' and value.startswith('HTTPie/'):
                    continue

                for prefix in SESSION_IGNORED_HEADER_PREFIXES:
                    if name.lower().startswith(prefix.lower()):
                        break
                else:
                    self['headers'][name] = value
```

In the corrected code, we first check if `value` is not `None`. If it is not `None`, then we check if it is an instance of bytes. If it is, we decode it using 'utf8'. Then, we also check if `name` is not `None`, and if it is not, we proceed to update the headers. This should prevent the 'NoneType' object has no attribute 'decode' error.