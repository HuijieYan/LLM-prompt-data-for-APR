The error occurs in the `update_headers` method of the `Session` class. The error is due to the fact that the `value` from the `request_headers` is assumed to be a bytes-like object that can be decoded using the `decode` method, but in the case of the 'Accept-Encoding' header, the value is `None`, leading to the 'AttributeError: 'NoneType' object has no attribute 'decode''.

To fix this, we need to first check if the `value` is not None before trying to decode it. Additionally, we should handle the case where the value is `None` and make sure that we set the header in `self['headers']`.

Here is the corrected code for the problematic function:

```python
# class declaration containing the buggy function
class Session(BaseConfigDict):
    # ... omitted code ...

    # this is the fixed function
    def update_headers(self, request_headers):
        """
        Update the session headers with the request ones while ignoring
        certain name prefixes.
    
        :type request_headers: dict
    
        """
        for name, value in request_headers.items():
            if value is not None:
                value = value.decode('utf8')
            
            if name == 'User-Agent' and value.startswith('HTTPie/'):
                continue
    
            for prefix in SESSION_IGNORED_HEADER_PREFIXES:
                if name.lower().startswith(prefix.lower()):
                    break
            else:
                self['headers'][name] = value if value is not None else ''
```