The error occurs when trying to decode a value that is None, resulting in the 'NoneType' object has no attribute 'decode' error. This is likely due to the 'Accept-Encoding' header being set to None in the input request_headers.

To fix this bug, we should check if the value is not None before trying to decode it, and also update the 'self' object with the new headers.

Here's the corrected function:

```python
def update_headers(self, request_headers):
    for name, value in request_headers.items():
        if value is not None:
            value = value.decode('utf8')
        
        if name == 'User-Agent' and value.startswith('HTTPie/'):
            continue

        for prefix in SESSION_IGNORED_HEADER_PREFIXES:
            if name.lower().startswith(prefix.lower()):
                break
        else:
            self['headers'][name] = value
```