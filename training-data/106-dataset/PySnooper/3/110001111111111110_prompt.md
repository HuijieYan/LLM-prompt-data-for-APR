Please fix the function/method provided below and provide the corrected function/method as the output.


# Buggy function source code
```python
# file name: /Volumes/SSD2T/bgp_envs/repos/PySnooper_3/pysnooper/pysnooper.py

# relative function's signature in this file
def write(s):
    # ... omitted code ...
    pass

# relative function's signature in this file
def write(s):
    # ... omitted code ...
    pass

# relative function's signature in this file
def write(s):
    # ... omitted code ...
    pass



    # this is the buggy function you need to fix
    def get_write_function(output):
        if output is None:
            def write(s):
                stderr = sys.stderr
                stderr.write(s)
        elif isinstance(output, (pycompat.PathLike, str)):
            def write(s):
                with open(output_path, 'a') as output_file:
                    output_file.write(s)
        else:
            assert isinstance(output, utils.WritableStream)
            def write(s):
                output.write(s)
    
        return write
    
```

# Variable runtime value and type inside buggy function
## Buggy case 1
### input parameter runtime value and type for buggy function
output, value: `'/var/folders/ng/72llsm517x12c2p18htksyjc0000gn/T/pysnoopere861sg2m/foo.log'`, type: `str`

### variable runtime value and type before buggy function return
write, value: `<function get_write_function.<locals>.write at 0x10301c3a0>`, type: `function`



# Expected variable value and type in tests
## Expected case 1
### Input parameter value and type
output, value: `'/var/folders/ng/72llsm517x12c2p18htksyjc0000gn/T/pysnooperleut8y32/foo.log'`, type: `str`

### Expected variable value and type before function return
write, expected value: `<function get_write_function.<locals>.write at 0x10c5bf3a0>`, type: `function`



# A test function for the buggy function
```python
# file name: /Volumes/SSD2T/bgp_envs/repos/PySnooper_3/tests/test_pysnooper.py

def test_file_output():

    with temp_file_tools.create_temp_folder(prefix='pysnooper') as folder:
        path = folder / 'foo.log'
        @pysnooper.snoop(str(path))
        def my_function(foo):
            x = 7
            y = 8
            return y + x
        result = my_function('baba')
        assert result == 15
        output = path.open().read()
        assert_output(
            output,
            (
                VariableEntry('foo', value_regex="u?'baba'"),
                CallEntry(),
                LineEntry('x = 7'),
                VariableEntry('x', '7'),
                LineEntry('y = 8'),
                VariableEntry('y', '8'),
                LineEntry('return y + x'),
                ReturnEntry('return y + x'),
            )
        )
```

## Error message from test function
```text
def test_file_output():
    
        with temp_file_tools.create_temp_folder(prefix='pysnooper') as folder:
            path = folder / 'foo.log'
            @pysnooper.snoop(str(path))
            def my_function(foo):
                x = 7
                y = 8
                return y + x
>           result = my_function('baba')

tests/test_pysnooper.py:183: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../envs/PySnooper_3/lib/python3.8/site-packages/decorator.py:232: in fun
    return caller(func, *(extras + args), **kw)
pysnooper/pysnooper.py:72: in decorate
    return function(*args, **kwargs)
tests/test_pysnooper.py:178: in my_function
    @pysnooper.snoop(str(path))
pysnooper/tracer.py:173: in trace
    self.write('{indent}{newish_string}{name} = {value_repr}'.format(
pysnooper/tracer.py:114: in write
    self._write(s)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

s = "Starting var:.. foo = 'baba'\n"

    def write(s):
>       with open(output_path, 'a') as output_file:
E       NameError: name 'output_path' is not defined

pysnooper/pysnooper.py:26: NameError

```


# A GitHub issue title for this bug
```text
NameError: global name 'output_path' is not defined
```

## The associated detailed issue description
```text
PySnooper/pysnooper/pysnooper.py

Line 26 in 6e3d797

 with open(output_path, 'a') as output_file: 
should probably read

with open(output, 'a') as output_file:
```



