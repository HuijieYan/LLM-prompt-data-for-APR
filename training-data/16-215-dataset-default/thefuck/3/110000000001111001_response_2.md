The issue with the provided function is that it is using the `Popen` and `PIPE` classes from the `subprocess` module without importing them. Additionally, it is missing the `DEVNULL` variable. 

Here's the corrected code:

```python
from subprocess import Popen, PIPE, DEVNULL

def info(self):
    """Returns the name and version of the current shell"""
    proc = Popen(['fish', '-c', 'echo $FISH_VERSION'], stdout=PIPE, stderr=DEVNULL)
    version = proc.stdout.read().decode('utf-8').strip()
    return u'Fish Shell, version {}'.format(version)
```

This code now imports the required classes from the `subprocess` module and includes the `DEVNULL` variable. This should resolve the issue and the function should now return the expected value and type of variables during the tests.