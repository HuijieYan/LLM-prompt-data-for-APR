{
    "scrapy": [
        {
            "bugID": 6,
            "start_line": 130,
            "file_name": "scrapy/pipelines/images.py",
            "replace_code": "def convert_image(self, image, size=None):\n    if image.format == 'PNG' and image.mode == 'RGBA':\n        converted_image = image.convert('RGB')\n    else:\n        converted_image = image.convert('RGB')\n\n    if size:\n        resized_image = converted_image.copy()\n        resized_image.thumbnail(size, Image.ANTIALIAS)\n        final_image = resized_image\n    else:\n        final_image = converted_image\n\n    buf = BytesIO()\n    final_image.save(buf, 'JPEG')\n    return final_image, buf",
            "import_list": []
        }
    ]
}