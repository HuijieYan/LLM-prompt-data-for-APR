The error is raised in the `_convert_key` function in the `pandas/core/indexing.py` file. This happens when using the `at` indexer with an integer value in the presence of a float index.

The `_convert_key` function checks whether the axis is an integer index and whether the indexer is an integer. If the indexer is an integer and the axis is not an integer, it raises a `ValueError`.

The issue is that when using the `at` indexer with an integer, it tries to convert it to a float index, but the `_convert_key` function doesn't handle this case correctly. 

To fix the bug, we should modify the `_convert_key` function to handle conversion of integer values to float index correctly when using the `at` indexer.

Here's the corrected `_convert_key` function:

```python
def _convert_key(self, key, is_setter: bool = False):
    """
    Require they keys to be the same type as the index. (so we don't fallback)
    """
    # allow arbitrary setting
    if is_setter:
        return list(key)
  
    for ax, i in zip(self.obj.axes, key):
        if ax.is_integer():
            if not is_integer(i):
                raise ValueError(
                    "At based indexing on an integer index "
                    "can only have integer indexers"
                )
        elif not (is_float(i) or is_integer(i)) and ax.is_floating():
            raise ValueError(
                "At based indexing on a float index "
                "can only have float indexers"
            )
    return key
```

This updated version of `_convert_key` includes a condition to check if the indexer is a non-integer value and if the axis is a floating-point index. If both conditions are satisfied, it raises a `ValueError` with an appropriate error message. 

This change allows for proper handling of integer values converted to float indices when using the `at` indexer, resolving the issue observed in the failing test.

After making this change, the updated `_convert_key` function should be used as a drop-in replacement for the buggy version.