Please fix the buggy function provided below and output a corrected version.


# The source code of the buggy function
```python
# The declaration of the class containing the buggy function
class StackedRNNCells(Layer):
    """
    Wrapper allowing a stack of RNN cells to behave as a single cell.
    
    Used to implement efficient stacked RNNs.
    
    # Arguments
        cells: List of RNN cell instances.
    
    # Examples
    
    ```python
        cells = [
            keras.layers.LSTMCell(output_dim),
            keras.layers.LSTMCell(output_dim),
            keras.layers.LSTMCell(output_dim),
        ]
    
        inputs = keras.Input((timesteps, input_dim))
        x = keras.layers.RNN(cells)(inputs)
    ```
    """



    # This function from the same class is called by the buggy function
    def state_size(self):
        # Please ignore the body of this function

    # This function from the same class is called by the buggy function
    def build(self, input_shape):
        # Please ignore the body of this function



    # this is the buggy function you need to fix
    def build(self, input_shape):
        for cell in self.cells:
            if isinstance(cell, Layer):
                cell.build(input_shape)
            if hasattr(cell.state_size, '__len__'):
                output_dim = cell.state_size[0]
            else:
                output_dim = cell.state_size
            input_shape = (input_shape[0], input_shape[1], output_dim)
        self.built = True
    
```




