{
  "project": "youtube-dl",
  "bugs": [
    {
      "id": 17,
      "buggy_code_blocks": [
        {
          "filename": "youtube_dl/utils.py",
          "source_code": "def cli_bool_option(params, command_option, param, true_value='true', false_value='false', separator=None):\n    param = params.get(param)\n    if param is None:\n        return []\n    assert isinstance(param, bool)\n    if separator:\n        return [command_option + separator + (true_value if param else false_value)]\n    return [command_option, true_value if param else false_value]"
        }
      ],
      "features": {
        "class_definition": null,
        "variable_definitions": null,
        "error_message": "======================================================================\nFAIL: test_cli_bool_option (test.test_utils.TestUtil)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/jerry/Documents/GitHub/PyRepair/benchmarks/BugsInPy_Cloned_Repos/youtube-dl:17/test/test_utils.py\", line 1187, in test_cli_bool_option\n    {}, '--check-certificate', 'nocheckcertificate', 'false', 'true', '='),\n  File \"/Users/jerry/Documents/GitHub/PyRepair/benchmarks/BugsInPy_Cloned_Repos/youtube-dl:17/youtube_dl/utils.py\", line 2736, in cli_bool_option\n    assert isinstance(param, bool)\nAssertionError\n\n----------------------------------------------------------------------\nRan 1 test in 0.006s\n\nFAILED (failures=1)\n",
        "test_code_blocks": [
          {
            "filename": "test/test_utils.py",
            "test_code": "def test_cli_bool_option(self):\n        self.assertEqual(\n            cli_bool_option(\n                {'nocheckcertificate': True}, '--no-check-certificate', 'nocheckcertificate'),\n            ['--no-check-certificate', 'true'])\n        self.assertEqual(\n            cli_bool_option(\n                {'nocheckcertificate': True}, '--no-check-certificate', 'nocheckcertificate', separator='='),\n            ['--no-check-certificate=true'])\n        self.assertEqual(\n            cli_bool_option(\n                {'nocheckcertificate': True}, '--check-certificate', 'nocheckcertificate', 'false', 'true'),\n            ['--check-certificate', 'false'])\n        self.assertEqual(\n            cli_bool_option(\n                {'nocheckcertificate': True}, '--check-certificate', 'nocheckcertificate', 'false', 'true', '='),\n            ['--check-certificate=false'])\n        self.assertEqual(\n            cli_bool_option(\n                {'nocheckcertificate': False}, '--check-certificate', 'nocheckcertificate', 'false', 'true'),\n            ['--check-certificate', 'true'])\n        self.assertEqual(\n            cli_bool_option(\n                {'nocheckcertificate': False}, '--check-certificate', 'nocheckcertificate', 'false', 'true', '='),\n            ['--check-certificate=true'])\n        self.assertEqual(\n            cli_bool_option(\n                {}, '--check-certificate', 'nocheckcertificate', 'false', 'true', '='),\n            [])"
          }
        ],
        "raised_issue_descriptions": [
          {
            "title": "Error when using external_downloader = curl without explicitly specifying continuedl",
            "content": "In CurlFD, this line\n\ncmd += self._bool_option('--continue-at', 'continuedl', '-', '0')\nwill fail since continuedl value is None, unless it is explicitly specified in the options."
          }
        ]
      }
    },
    {
      "id": 28,
      "buggy_code_blocks": [
        {
          "filename": "youtube_dl/utils.py",
          "source_code": "def _htmlentity_transform(entity):\n    \"\"\"Transforms an HTML entity to a character.\"\"\"\n    # Known non-numeric HTML entity\n    if entity in compat_html_entities.name2codepoint:\n        return compat_chr(compat_html_entities.name2codepoint[entity])\n    mobj = re.match(r'#(x[0-9a-fA-F]+|[0-9]+)', entity)\n    if mobj is not None:\n        numstr = mobj.group(1)\n        if numstr.startswith('x'):\n            base = 16\n            numstr = '0%s' % numstr\n        else:\n            base = 10\n        return compat_chr(int(numstr, base))"
        }
      ],
      "features": {
        "class_definition": null,
        "variable_definitions": null,
        "error_message": "======================================================================\nERROR: test_unescape_html (test.test_utils.TestUtil)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/jerry/Documents/GitHub/PyRepair/benchmarks/BugsInPy_Cloned_Repos/youtube-dl:28/test/test_utils.py\", line 214, in test_unescape_html\n    self.assertEqual(unescapeHTML('&#2013266066;'), '&#2013266066;')\n  File \"/Users/jerry/Documents/GitHub/PyRepair/benchmarks/BugsInPy_Cloned_Repos/youtube-dl:28/youtube_dl/utils.py\", line 411, in unescapeHTML\n    r'&([^;]+);', lambda m: _htmlentity_transform(m.group(1)), s)\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/re.py\", line 194, in sub\n    return _compile(pattern, flags).sub(repl, string, count)\n  File \"/Users/jerry/Documents/GitHub/PyRepair/benchmarks/BugsInPy_Cloned_Repos/youtube-dl:28/youtube_dl/utils.py\", line 411, in <lambda>\n    r'&([^;]+);', lambda m: _htmlentity_transform(m.group(1)), s)\n  File \"/Users/jerry/Documents/GitHub/PyRepair/benchmarks/BugsInPy_Cloned_Repos/youtube-dl:28/youtube_dl/utils.py\", line 399, in _htmlentity_transform\n    return compat_chr(int(numstr, base))\nValueError: chr() arg not in range(0x110000)\n\n----------------------------------------------------------------------\nRan 1 test in 0.006s\n\nFAILED (errors=1)",
        "test_code_blocks": [
          {
            "filename": "test/test_utils.py",
            "test_code": "def test_unescape_html(self):\n        self.assertEqual(unescapeHTML('%20;'), '%20;')\n        self.assertEqual(unescapeHTML('&#x2F;'), '/')\n        self.assertEqual(unescapeHTML('&#47;'), '/')\n        self.assertEqual(unescapeHTML('&eacute;'), 'Ã©')\n        self.assertEqual(unescapeHTML('&#2013266066;'), '&#2013266066;')"
          }
        ],
        "raised_issue_descriptions": [
          {
            "title": "ValueError: unichr() arg not in range(0x110000) (wide Python build)",
            "content": "Downloading this video fails because of text like \"&#2013266066;\" in the description.\n\n$ PYTHONPATH=`pwd`  ./bin/youtube-dl --verbose --list-formats 'https://www.youtube.com/watch?v=2nXFzmAtsRM'\n[debug] System config: []\n[debug] User config: []\n[debug] Command-line args: [u'--verbose', u'--list-formats', u'https://www.youtube.com/watch?v=2nXFzmAtsRM']\n[debug] Encodings: locale UTF-8, fs UTF-8, out UTF-8, pref UTF-8\n[debug] youtube-dl version 2015.11.15\n[debug] Git HEAD: bd1512d\n[debug] Python version 2.7.9 - Linux-3.19.0-33-generic-x86_64-with-Ubuntu-15.04-vivid\n[debug] exe versions: ffmpeg 2.5.8-0ubuntu0.15.04.1, ffprobe 2.5.8-0ubuntu0.15.04.1, rtmpdump 2.4\n[debug] Proxy map: {}\n[youtube] 2nXFzmAtsRM: Downloading webpage\n[youtube] 2nXFzmAtsRM: Downloading video info webpage\nTraceback (most recent call last):\n  File \"./bin/youtube-dl\", line 6, in <module>\n    youtube_dl.main()\n  File \"/home/lukas/work/youtube-dl/youtube_dl/__init__.py\", line 410, in main\n    _real_main(argv)\n  File \"/home/lukas/work/youtube-dl/youtube_dl/__init__.py\", line 400, in _real_main\n    retcode = ydl.download(all_urls)\n  File \"/home/lukas/work/youtube-dl/youtube_dl/YoutubeDL.py\", line 1666, in download\n    url, force_generic_extractor=self.params.get('force_generic_extractor', False))\n  File \"/home/lukas/work/youtube-dl/youtube_dl/YoutubeDL.py\", line 661, in extract_info\n    ie_result = ie.extract(url)\n  File \"/home/lukas/work/youtube-dl/youtube_dl/extractor/common.py\", line 290, in extract\n    return self._real_extract(url)\n  File \"/home/lukas/work/youtube-dl/youtube_dl/extractor/youtube.py\", line 1157, in _real_extract\n    video_description = clean_html(video_description)\n  File \"/home/lukas/work/youtube-dl/youtube_dl/utils.py\", line 275, in clean_html\n    html = unescapeHTML(html)\n  File \"/home/lukas/work/youtube-dl/youtube_dl/utils.py\", line 411, in unescapeHTML\n    r'&([^;]+);', lambda m: _htmlentity_transform(m.group(1)), s)\n  File \"/usr/lib/python2.7/re.py\", line 155, in sub\n    return _compile(pattern, flags).sub(repl, string, count)\n  File \"/home/lukas/work/youtube-dl/youtube_dl/utils.py\", line 411, in <lambda>\n    r'&([^;]+);', lambda m: _htmlentity_transform(m.group(1)), s)\n  File \"/home/lukas/work/youtube-dl/youtube_dl/utils.py\", line 399, in _htmlentity_transform\n    return compat_chr(int(numstr, base))\nValueError: unichr() arg not in range(0x110000) (wide Python build)"
          }
        ]
      }
    }
  ]
}