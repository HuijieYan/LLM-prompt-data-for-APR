{
    "keras:2": {
        "github_issue_title": [
            "K.in_top_k on CNTK backend is broken\n"
        ],
        "github_issue_description": [
            "Reproducible script\n\nimport keras\nfrom keras import backend as K\nimport numpy as np\n\nbatch_size = 20\nnum_classes = 10\npredictions = K.variable(np.random.random((batch_size, num_classes)).astype('float32'))\ntargets = K.variable(np.random.randint(num_classes, size=batch_size, dtype='int32'))\n\nK.eval(K.in_top_k(predictions,targets,3))\nthrows\n\nAbout to throw exception 'Node 'ClassificationError10' (ClassificationError operation): Expected MBLayout in Input 0.'\nValidating --> ClassificationError10 = ClassificationError (OneHotOp6, Parameter4, Constant9) : [10 x 20], [10 x 20], [] -> [] FAILED\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/home/abhai/keras-env/keras/keras/backend/cntk_backend.py\", line 249, in eval\n    return x.eval()\n  File \"/home/abhai/keras-env/lib/python3.6/site-packages/cntk/ops/functions.py\", line 733, in eval\n    _, output_map = self.forward(arguments, outputs, device=device, as_numpy=as_numpy)\n  File \"/home/abhai/keras-env/lib/python3.6/site-packages/cntk/internal/swig_helper.py\", line 69, in wrapper\n    result = f(*args, **kwds)\n  File \"/home/abhai/keras-env/lib/python3.6/site-packages/cntk/ops/functions.py\", line 867, in forward\n    keep_for_backward)\n  File \"/home/abhai/keras-env/lib/python3.6/site-packages/cntk/cntk_py.py\", line 1980, in _forward\n    return _cntk_py.Function__forward(self, *args)\nRuntimeError: Node 'ClassificationError10' (ClassificationError operation): Expected MBLayout in Input 0.\n Check that you are up-to-date with the master branch of Keras. You can update with:\npip install git+git://github.com/keras-team/keras.git --upgrade --no-deps\n\n Check that your version of CNTK is up-to-date.\n\n Provide a link to a GitHub Gist of a Python script that can reproduce your issue (or just copy the script here if it is short).\n"
        ]
    }
}