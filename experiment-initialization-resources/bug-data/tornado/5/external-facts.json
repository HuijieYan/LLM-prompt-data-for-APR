{
    "tornado:5": {
        "github_issue_title": [
            "ioloop: PeriodicCallback executes too often on windows\n"
        ],
        "github_issue_description": [
            "Here is the code:\nimport math\n\nimport logging\nfrom crontab import CronTab\nfrom tornado.ioloop import PeriodicCallback, IOLoop\n\nlogging.basicConfig(level=logging.DEBUG, format='%(asctime)s - %(name)s - %(levelname)s - %(message)s')\n\nclass CronTabCallback(PeriodicCallback):\n\ndef __init__(self, callback, schedule):\n    self._callback = callback\n    self._crontab = CronTab(schedule)\n    super(CronTabCallback, self).__init__(self.run, self._calc_callbacktime())\n\ndef _calc_callbacktime(self, now=None):\n    return math.ceil(self._crontab.next(now)) * 1000.0\n\ndef run(self):\n    return self._callback()\n\ndef _schedule_next(self):\n    self.callback_time = self._calc_callbacktime()\n    logging.info('calc ---------------------')\n    logging.info('delay %s' % self.callback_time)\n    logging.info('last execute %s' % self._next_timeout)\n\n    last = self._next_timeout\n    super(CronTabCallback, self)._schedule_next()\n\n    if last == self._next_timeout:\n        logging.error('error !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!')\n\n    logging.info('current: %s' % self.io_loop.time())\n    logging.info('calc next: %s' % self._next_timeout)\n    logging.info('--------------------------\\n')\ndef crontab(schedule):\ndef decorator(func):\nCronTabCallback(func, schedule).start()\nreturn func\n\nreturn decorator\n@crontab('*/1 * * * *')\ndef run():\nlogging.info('execute ... \\n')\n\nif name == 'main':\nIOLoop.current().start()\n\nHere is the console log\n2018-03-30 11:33:00,311 - asyncio - DEBUG - Using selector: SelectSelector\n2018-03-30 11:33:00,316 - root - INFO - calc ---------------------\n2018-03-30 11:33:00,316 - root - INFO - delay 60000.0\n2018-03-30 11:33:00,316 - root - INFO - last execute 1522380780.3169544\n2018-03-30 11:33:00,316 - root - INFO - current: 1522380780.3169544\n2018-03-30 11:33:00,316 - root - INFO - calc next: 1522380840.3169544\n2018-03-30 11:33:00,316 - root - INFO - --------------------------\n\n2018-03-30 11:34:00,313 - root - INFO - execute ...\n\n2018-03-30 11:34:00,313 - root - INFO - calc ---------------------\n2018-03-30 11:34:00,313 - root - INFO - delay 60000.0\n2018-03-30 11:34:00,313 - root - INFO - last execute 1522380840.3169544\n2018-03-30 11:34:00,313 - root - ERROR - error !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n2018-03-30 11:34:00,313 - root - INFO - current: 1522380840.3139544\n2018-03-30 11:34:00,313 - root - INFO - calc next: 1522380840.3169544\n2018-03-30 11:34:00,313 - root - INFO - --------------------------\n\n2018-03-30 11:34:00,318 - root - INFO - execute ...\n\n2018-03-30 11:34:00,318 - root - INFO - calc ---------------------\n2018-03-30 11:34:00,318 - root - INFO - delay 60000.0\n2018-03-30 11:34:00,318 - root - INFO - last execute 1522380840.3169544\n2018-03-30 11:34:00,318 - root - INFO - current: 1522380840.3189545\n2018-03-30 11:34:00,318 - root - INFO - calc next: 1522380900.3169544\n2018-03-30 11:34:00,318 - root - INFO - --------------------------\n\nEnvironment:\nOS: windows 7\nPython: python 3.6\nDependent library: crontab 0.22.0\n\nTornado 4.5.1 python2 (ok) python3(ok)\nTornado 5.0.1 python2 (ok) python3 (linux ok, window has issue)\n"
        ]
    }
}