{
    "scrapy:18": {
        "github_issue_title": [
            "PY3: error decoding Content-Disposition header\n"
        ],
        "github_issue_description": [
            "This request\n\nscrapy shell 'http://npe.com.cn/plus/save_to_doc.php?id=1666'\nraises this error:\n\nTraceback (most recent call last):\n  File \"/Users/kmike/envs/dl/bin/scrapy\", line 9, in <module>\n    load_entry_point('Scrapy', 'console_scripts', 'scrapy')()\n  File \"/Users/kmike/svn/scrapy/scrapy/cmdline.py\", line 142, in execute\n    _run_print_help(parser, _run_command, cmd, args, opts)\n  File \"/Users/kmike/svn/scrapy/scrapy/cmdline.py\", line 88, in _run_print_help\n    func(*a, **kw)\n  File \"/Users/kmike/svn/scrapy/scrapy/cmdline.py\", line 149, in _run_command\n    cmd.run(args, opts)\n  File \"/Users/kmike/svn/scrapy/scrapy/commands/shell.py\", line 71, in run\n    shell.start(url=url)\n  File \"/Users/kmike/svn/scrapy/scrapy/shell.py\", line 47, in start\n    self.fetch(url, spider)\n  File \"/Users/kmike/svn/scrapy/scrapy/shell.py\", line 112, in fetch\n    reactor, self._schedule, request, spider)\n  File \"/Users/kmike/envs/dl/lib/python3.5/site-packages/Twisted-15.5.0-py3.5.egg/twisted/internet/threads.py\", line 122, in blockingCallFromThread\n    result.raiseException()\n  File \"/Users/kmike/envs/dl/lib/python3.5/site-packages/Twisted-15.5.0-py3.5.egg/twisted/python/failure.py\", line 368, in raiseException\n    raise self.value.with_traceback(self.tb)\nUnicodeDecodeError: 'utf-8' codec can't decode byte 0xb8 in position 25: invalid start byte\nThe error points to a wrong location (similar to #1760); the real traceback is\n\nTraceback (most recent call last):\n  File \"/Users/kmike/envs/dl/lib/python3.5/site-packages/Twisted-15.5.0-py3.5.egg/twisted/internet/defer.py\", line 1126, in _inlineCallbacks\n    result = result.throwExceptionIntoGenerator(g)\n  File \"/Users/kmike/envs/dl/lib/python3.5/site-packages/Twisted-15.5.0-py3.5.egg/twisted/python/failure.py\", line 389, in throwExceptionIntoGenerator\n    return g.throw(self.type, self.value, self.tb)\n  File \"/Users/kmike/svn/scrapy/scrapy/core/downloader/middleware.py\", line 43, in process_request\n    defer.returnValue((yield download_func(request=request,spider=spider)))\n  File \"/Users/kmike/envs/dl/lib/python3.5/site-packages/Twisted-15.5.0-py3.5.egg/twisted/internet/defer.py\", line 588, in _runCallbacks\n    current.result = callback(current.result, *args, **kw)\n  File \"/Users/kmike/svn/scrapy/scrapy/core/downloader/handlers/http11.py\", line 272, in _cb_bodydone\n    respcls = responsetypes.from_args(headers=headers, url=url)\n  File \"/Users/kmike/svn/scrapy/scrapy/responsetypes.py\", line 110, in from_args\n    cls = self.from_headers(headers)\n  File \"/Users/kmike/svn/scrapy/scrapy/responsetypes.py\", line 78, in from_headers\n    cls = self.from_content_disposition(headers[b'Content-Disposition'])\n  File \"/Users/kmike/svn/scrapy/scrapy/responsetypes.py\", line 62, in from_content_disposition\n    filename = to_native_str(content_disposition).split(';')[1].split('=')[1]\n  File \"/Users/kmike/svn/scrapy/scrapy/utils/python.py\", line 129, in to_native_str\n    return to_unicode(text, encoding, errors)\n  File \"/Users/kmike/svn/scrapy/scrapy/utils/python.py\", line 107, in to_unicode\n    return text.decode(encoding, errors)\nUnicodeDecodeError: 'utf-8' codec can't decode byte 0xb8 in position 25: invalid start byte\nIt looks like Content-Disposition is decoded using utf-8, but the encoding was not UTF-8.\n"
        ]
    }
}