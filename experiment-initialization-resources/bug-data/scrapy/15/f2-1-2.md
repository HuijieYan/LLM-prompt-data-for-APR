# Error stack trace

```json
[
    [
        "self = <encodings.idna.Codec object at 0x7fdfaff22580>, input = '.example.com'\nerrors = 'strict'\n\n    def encode(self, input, errors='strict'):\n    \n        if errors != 'strict':\n            # IDNA is quite clear that implementations must be strict\n            raise UnicodeError(\"unsupported error handling \"+errors)\n    \n        if not input:\n            return b'', 0\n    \n        try:\n            result = input.encode('ascii')\n        except UnicodeEncodeError:\n            pass\n        else:\n            # ASCII name: fast path\n            labels = result.split(b'.')\n            for label in labels[:-1]:\n                if not (0 < len(label) < 64):\n>                   raise UnicodeError(\"label empty or too long\")",
        "\n/usr/local/lib/python3.8/encodings/idna.py:165: UnicodeError\n\nThe above exception was the direct cause of the following exception:\n\nself = <tests.test_utils_url.CanonicalizeUrlTest testMethod=test_canonicalize_url_idna_exceptions>\n\n    def test_canonicalize_url_idna_exceptions(self):\n        # missing DNS label\n        self.assertEqual(\n>           canonicalize_url(u\"http://.example.com/r\u00e9sum\u00e9?q=r\u00e9sum\u00e9\"),\n            \"http://.example.com/r%C3%A9sum%C3%A9?q=r%C3%A9sum%C3%A9\")\n\n/home/ubuntu/Desktop/bgp_envs_local/repos/scrapy_15/tests/test_utils_url.py:271: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/home/ubuntu/Desktop/bgp_envs_local/repos/scrapy_15/scrapy/utils/url.py:84: in canonicalize_url\n    scheme, netloc, path, params, query, fragment = _safe_ParseResult(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nparts = ParseResult(scheme='http', netloc='.example.com', path='/r\u00e9sum\u00e9', params='', query='q=r\u00e9sum\u00e9', fragment='')\nencoding = None, path_encoding = 'utf8'\n\n    def _safe_ParseResult(parts, encoding='utf8', path_encoding='utf8'):\n        return (\n            to_native_str(parts.scheme),\n>           to_native_str(parts.netloc.encode('idna')),\n    \n            # default encoding for path component SHOULD be UTF-8\n            quote(to_bytes(parts.path, path_encoding), _safe_chars),\n            quote(to_bytes(parts.params, path_encoding), _safe_chars),\n    \n            # encoding of query and fragment follows page encoding\n            # or form-charset (if known and passed)\n            quote(to_bytes(parts.query, encoding), _safe_chars),\n            quote(to_bytes(parts.fragment, encoding), _safe_chars)\n        )",
        "\n/home/ubuntu/Desktop/bgp_envs_local/repos/scrapy_15/scrapy/utils/url.py:46: UnicodeError"
    ]
]
```
