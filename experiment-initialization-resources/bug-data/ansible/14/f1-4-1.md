# Test code

```json
[
    "@pytest.mark.parametrize('responses', [\n    [\n        {\n            'count': 2,\n            'results': [{'name': '3.5.1', }, {'name': '3.5.2'}],\n            'next_link': None,\n            'next': None,\n            'previous_link': None,\n            'previous': None\n        },\n    ],\n    [\n        {\n            'count': 2,\n            'results': [{'name': '3.5.1'}],\n            'next_link': '/api/v1/roles/432/versions/?page=2&page_size=50',\n            'next': '/roles/432/versions/?page=2&page_size=50',\n            'previous_link': None,\n            'previous': None\n        },\n        {\n            'count': 2,\n            'results': [{'name': '3.5.2'}],\n            'next_link': None,\n            'next': None,\n            'previous_link': '/api/v1/roles/432/versions/?&page_size=50',\n            'previous': '/roles/432/versions/?page_size=50',\n        },\n    ]\n])\ndef test_get_role_versions_pagination(monkeypatch, responses):\n    api = get_test_galaxy_api('https://galaxy.com/api/', 'v1')\n\n    mock_open = MagicMock()\n    mock_open.side_effect = [StringIO(to_text(json.dumps(r))) for r in responses]\n    monkeypatch.setattr(galaxy_api, 'open_url', mock_open)\n\n    actual = api.fetch_role_related('versions', 432)\n    assert actual == [{'name': '3.5.1'}, {'name': '3.5.2'}]\n\n    assert mock_open.call_count == len(responses)\n\n    assert mock_open.mock_calls[0][1][0] == 'https://galaxy.com/api/v1/roles/432/versions/?page_size=50'\n    if len(responses) == 2:\n        assert mock_open.mock_calls[1][1][0] == 'https://galaxy.com/api/v1/roles/432/versions/?page=2&page_size=50'"
]
```
