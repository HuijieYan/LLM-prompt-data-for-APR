{
    "ansible:15": {
        "github_issue_title": [
            "eos_eapi does not turn on eapi by default\n"
        ],
        "github_issue_description": [
            "SUMMARY\neos_eapi does not turn on the Arista eAPI, it is missing an important command\n\ntoday if I have\n\n- eos_eapi:\nit will render this config on the Arista EOS device->\n\nmanagement api http-commands\n   vrf default\n      no shutdown\n!\nwhat it \"should\" render is this->\n\nmanagement api http-commands\n   no shutdown\n   !\n   vrf default\n      no shutdown\n!\nthe vrf default no shutdown is not even needed if you are truly just using the default vrf\nyou will get YES for the top line here->\n\nrtr2#show management api http-commands\nEnabled:            Yes\nHTTPS server:       running, set to use port 443\nHTTP server:        shutdown, set to use port 80\nLocal HTTP server:  shutdown, no authentication, set to use port 8080\nUnix Socket server: shutdown, no authentication\nVRFs:               default\nHits:               13\nLast hit:           865 seconds ago\nBytes in:           2090\nBytes out:          3712\nRequests:           9\nCommands:           18\nDuration:           0.187 seconds\nSSL Profile:        none\nFIPS Mode:          No\nQoS DSCP:           0\nLog Level:          none\nCSP Frame Ancestor: None\nTLS Protocols:      1.0 1.1 1.2\n   User        Requests       Bytes in       Bytes out    Last hit\n----------- -------------- -------------- --------------- ---------------\n   admin       9              2090           3712         865 seconds ago\n\nURLs\n----------------------------------------\nthe default behavior leaves you with no\n\nISSUE TYPE\nBug Report\nCOMPONENT NAME\neos_eapi\n\nANSIBLE VERSION\nansible 2.8.0.dev0\n  config file = /home/student2/.ansible.cfg\n  configured module search path = [u'/home/student2/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\n  executable location = /usr/bin/ansible\n  python version = 2.7.5 (default, Sep 12 2018, 05:31:16) [GCC 4.8.5 20150623 (Red Hat 4.8.5-36)]\nCONFIGURATION\n[student2@ansible ~]$ ansible-config dump --only-changed\nDEFAULT_HOST_LIST(/home/student2/.ansible.cfg) = [u'/home/student2/networking-workshop/lab_inventory/hosts']\nDEFAULT_STDOUT_CALLBACK(/home/student2/.ansible.cfg) = yaml\nDEFAULT_TIMEOUT(/home/student2/.ansible.cfg) = 60\nDEPRECATION_WARNINGS(/home/student2/.ansible.cfg) = False\nHOST_KEY_CHECKING(/home/student2/.ansible.cfg) = False\nPERSISTENT_COMMAND_TIMEOUT(/home/student2/.ansible.cfg) = 60\nPERSISTENT_CONNECT_TIMEOUT(/home/student2/.ansible.cfg) = 60\nRETRY_FILES_ENABLED(/home/student2/.ansible.cfg) = False\nOS / ENVIRONMENT\n[student2@ansible ~]$ cat /etc/*release\nNAME=\"Red Hat Enterprise Linux Server\"\nVERSION=\"7.4 (Maipo)\"\nID=\"rhel\"\nID_LIKE=\"fedora\"\nVARIANT=\"Server\"\nVARIANT_ID=\"server\"\nVERSION_ID=\"7.4\"\nPRETTY_NAME=\"Red Hat Enterprise Linux Server 7.4 (Maipo)\"\nANSI_COLOR=\"0;31\"\nCPE_NAME=\"cpe:/o:redhat:enterprise_linux:7.4:GA:server\"\nHOME_URL=\"https://www.redhat.com/\"\nBUG_REPORT_URL=\"https://bugzilla.redhat.com/\"\n\nREDHAT_BUGZILLA_PRODUCT=\"Red Hat Enterprise Linux 7\"\nREDHAT_BUGZILLA_PRODUCT_VERSION=7.4\nREDHAT_SUPPORT_PRODUCT=\"Red Hat Enterprise Linux\"\nREDHAT_SUPPORT_PRODUCT_VERSION=\"7.4\"\nRed Hat Enterprise Linux Server release 7.4 (Maipo)\nRed Hat Enterprise Linux Server release 7.4 (Maipo)\nSTEPS TO REPRODUCE\nsetup your hostvars\n\n[arista:vars]\nansible_user=admin\nansible_password=admin\nansible_network_os=eos\nansible_connection=httpapi\nansible_become=true\nansible_become_method=enable\nansible_httpapi_use_ssl=true\nansible_httpapi_validate_certs=false\nplaybook:\n\n---\n- name: TURN ON HTTPAPI CONNECTION PLUGINS\n  hosts: arista\n  gather_facts: false\n  tasks:\n    - eos_eapi:\n      vars:\n        ansible_connection: network_cli\n\n    - net_user:\n        name: admin\n        configured_password: admin\n        privilege: 15\n      vars:\n        ansible_connection: network_cli\nEXPECTED RESULTS\nEnabled: yes as provided in the summary from the\n\nrtr2#show management api http-commands\nEnabled:            Yes\nHTTPS server:       running, set to use port 443\nor you can do->\n\nshow management api http-commands | json\nshould have this output somewhere->\n\n    \"httpsServer\": {\n        \"running\": true,\n        \"configured\": true,\n        \"port\": 443\nACTUAL RESULTS\nrtr2#show management api http-commands\nEnabled:            No\nHTTPS server:       enabled, set to use port 443\nHTTP server:        shutdown, set to use port 80\nLocal HTTP server:  shutdown, no authentication, set to use port 8080\nUnix Socket server: shutdown, no authentication\nVRFs:               None\nHits:               13\nLast hit:           1055 seconds ago\nBytes in:           2090\nBytes out:          3712\nRequests:           9\nCommands:           18\nDuration:           0.187 seconds\nSSL Profile:        none\nFIPS Mode:          No\nQoS DSCP:           0\nLog Level:          none\nCSP Frame Ancestor: None\nTLS Protocols:      1.0 1.1 1.2\n"
        ]
    }
}