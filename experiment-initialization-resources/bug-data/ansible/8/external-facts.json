{
    "ansible:8": {
        "github_issue_title": [
            "Add UNC path support to the Fetch action\n"
        ],
        "github_issue_description": [
            "SUMMARY\nFetch module fails with path not found error when used with UNC path.\n\nISSUE TYPE\nBug Report\nFeature Idea\nCOMPONENT NAME\nFetch module\n\nANSIBLE VERSION\nansible 2.9.2\n  config file = /etc/ansible/ansible.cfg\n  configured module search path = ['/home/ikanse/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\n  ansible python module location = /usr/lib/python3.7/site-packages/ansible\n  executable location = /usr/bin/ansible\n  python version = 3.7.5 (default, Oct 17 2019, 12:09:47) [GCC 9.2.1 20190827 (Red Hat 9.2.1-1)]\nCONFIGURATION\nNo changes from the default config\nOS / ENVIRONMENT\nControl node:\nFedora release 30 (Thirty)\nManged node:\nWindows Server 2016 Datacenter\nVersion: 1607\nSTEPS TO REPRODUCE\nCreate a share on the managed Windows node.\n\n- hosts: localhost\n  gather_facts: false\n  tasks:\n    - name: Add hostname supplied by variable to adhoc_group\n      add_host:\n        name: \"HOST\"\n        groups: adhoc_group\n        ansible_user: Administrator\n        ansible_password: 'PASSWORD'\n        ansible_connection: winrm\n        ansible_winrm_transport: basic\n        ansible_winrm_server_cert_validation: ignore\n        ansible_winrm_connection_timeout: 600\n \n- hosts: adhoc_group\n  tasks:\n  - name: win copy\n    win_copy:\n      dest: '\\\\EC2AMAZ-T130RGR\\testshare\\test123.txt'\n      src: testvars.yml\n\n  - name: access file\n    fetch:\n      src: '\\\\EC2AMAZ-T130RGR\\testshare\\test123.txt'\n      dest: /tmp/\n      flat: yes\nEXPECTED RESULTS\nPath is rendered correctly and the file is fetched from the remote server.\n\nACTUAL RESULTS\nThe path is not rendered correctly by fetch module:\n\n\"msg\": \"Path EC2AMAZ-T130RGR\\\\testshare\\\\test123.txt is not found\"\nFrom win_copy module we can see that correct path is used:\n\n\"dest\": \"\\\\\\\\EC2AMAZ-T130RGR\\\\testshare\\\\test123.txt\",\nansible-playbook 2.9.2\n  config file = /etc/ansible/ansible.cfg\n  configured module search path = ['/home/ikanse/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\n  ansible python module location = /usr/lib/python3.7/site-packages/ansible\n  executable location = /usr/bin/ansible-playbook\n  python version = 3.7.5 (default, Oct 17 2019, 12:09:47) [GCC 9.2.1 20190827 (Red Hat 9.2.1-1)]\nUsing /etc/ansible/ansible.cfg as config file\nhost_list declined parsing /etc/ansible/hosts as it did not pass its verify_file() method\nscript declined parsing /etc/ansible/hosts as it did not pass its verify_file() method\nauto declined parsing /etc/ansible/hosts as it did not pass its verify_file() method\nParsed /etc/ansible/hosts inventory source with ini plugin\n[WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost\ndoes not match 'all'\n\n\nPLAYBOOK: main.yml *************************************************************************************\n2 plays in main.yml\n\nPLAY [localhost] ***************************************************************************************\nMETA: ran handlers\n\nTASK [Add hostname supplied by variable to adhoc_group] ************************************************\ntask path: /home/ikanse/ansible/windows/main.yml:5\ncreating host via 'add_host': hostname=13.235.83.165\nchanged: [localhost] => {\n    \"add_host\": {\n        \"groups\": [\n            \"adhoc_group\"\n        ],\n        \"host_name\": \"13.235.83.165\",\n        \"host_vars\": {\n            \"ansible_connection\": \"winrm\",\n            \"ansible_password\": \"PASSWORD\",\n            \"ansible_user\": \"Administrator\",\n            \"ansible_winrm_connection_timeout\": 600,\n            \"ansible_winrm_server_cert_validation\": \"ignore\",\n            \"ansible_winrm_transport\": \"basic\"\n        }\n    },\n    \"changed\": true\n}\nMETA: ran handlers\nMETA: ran handlers\n\nPLAY [adhoc_group] *************************************************************************************\n\nTASK [Gathering Facts] *********************************************************************************\ntask path: /home/ikanse/ansible/windows/main.yml:16\nUsing module file /usr/lib/python3.7/site-packages/ansible/modules/windows/setup.ps1\nPipelining is enabled.\n<13.235.83.165> ESTABLISH WINRM CONNECTION FOR USER: Administrator on PORT 5986 TO 13.235.83.165\nEXEC (via pipeline wrapper)\nok: [13.235.83.165]\nMETA: ran handlers\n\nTASK [win copy] ****************************************************************************************\ntask path: /home/ikanse/ansible/windows/main.yml:18\nUsing module file /usr/lib/python3.7/site-packages/ansible/modules/windows/win_copy.ps1\nPipelining is enabled.\n<13.235.83.165> ESTABLISH WINRM CONNECTION FOR USER: Administrator on PORT 5986 TO 13.235.83.165\nEXEC (via pipeline wrapper)\nok: [13.235.83.165] => {\n    \"changed\": false,\n    \"checksum\": \"4e8bfbc031942c909e62592f6a3e728af39c156c\",\n    \"dest\": \"\\\\\\\\EC2AMAZ-T130RGR\\\\testshare\\\\test123.txt\",\n    \"operation\": \"file_copy\",\n    \"original_basename\": \"testvars.yml\",\n    \"size\": 15,\n    \"src\": \"testvars.yml\"\n}\n\nTASK [access file] *************************************************************************************\ntask path: /home/ikanse/ansible/windows/main.yml:23\nUsing module file /usr/lib/python3.7/site-packages/ansible/modules/windows/win_stat.ps1\nPipelining is enabled.\n<13.235.83.165> ESTABLISH WINRM CONNECTION FOR USER: Administrator on PORT 5986 TO 13.235.83.165\nEXEC (via pipeline wrapper)\nUsing module file /usr/lib/python3.7/site-packages/ansible/modules/windows/slurp.ps1\nPipelining is enabled.\nEXEC (via pipeline wrapper)\nfatal: [13.235.83.165]: FAILED! => {\n    \"changed\": false,\n    \"msg\": \"Path EC2AMAZ-T130RGR\\\\testshare\\\\test123.txt is not found\"\n}\n\nPLAY RECAP *********************************************************************************************\n13.235.83.165              : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   \nlocalhost                  : ok=1    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0  \n"
        ]
    }
}