# Error stack trace

```json
[
    [
        "__wrapped_mock_method__ = <function NonCallableMock.assert_called_once_with at 0x7f16cee593a0>\nargs = (<MagicMock name='mock._state._metrics_collector.configure_http_handler' id='139735885985968'>, <luigi.server.MetricsHandler object at 0x7f16cbdd6df0>)\nkwargs = {}, __tracebackhide__ = True\nmsg = \"Expected 'configure_http_handler' to be called once. Called 0 times.\"\n__mock_self = <MagicMock name='mock._state._metrics_collector.configure_http_handler' id='139735885985968'>\n\n    def assert_wrapper(\n        __wrapped_mock_method__: Callable[..., Any], *args: Any, **kwargs: Any\n    ) -> None:\n        __tracebackhide__ = True\n        try:\n>           __wrapped_mock_method__(*args, **kwargs)\n\n../../envs/luigi_1/lib/python3.8/site-packages/pytest_mock/plugin.py:459: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <MagicMock name='mock._state._metrics_collector.configure_http_handler' id='139735885985968'>\nargs = (<luigi.server.MetricsHandler object at 0x7f16cbdd6df0>,), kwargs = {}\nmsg = \"Expected 'configure_http_handler' to be called once. Called 0 times.\"\n\n    def assert_called_once_with(self, /, *args, **kwargs):\n        \"\"\"assert that the mock was called exactly once and that that call was\n        with the specified arguments.\"\"\"\n        if not self.call_count == 1:\n            msg = (\"Expected '%s' to be called once. Called %s times.%s\"\n                   % (self._mock_name or 'mock',\n                      self.call_count,\n                      self._calls_repr()))\n>           raise AssertionError(msg)",
        "\n/usr/local/lib/python3.8/unittest/mock.py:924: AssertionError\n\nDuring handling of the above exception, another exception occurred:\n\nself = <server_test.MetricsHandlerTest testMethod=test_get>\n\n    def test_get(self):\n        mock_metrics = mock.MagicMock()\n        self.mock_scheduler._state._metrics_collector.generate_latest.return_value = mock_metrics\n        with mock.patch.object(self.handler, 'write') as patched_write:\n            self.handler.get()\n            patched_write.assert_called_once_with(mock_metrics)\n>           self.mock_scheduler._state._metrics_collector.configure_http_handler.assert_called_once_with(\n                self.handler)",
        "\ntest/server_test.py:468: AssertionError"
    ]
]
```
